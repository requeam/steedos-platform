function module(e,t,i){"use strict";var n,o=E(e("../../core/renderer")),a,l=E(e("../../events/core/events_engine")),r,s=E(e("../../animation/translator")),d,c=E(e("./utils.recurrence")),h=e("../../core/utils/extend"),u,p=E(e("../../core/component_registrator")),m,f=E(e("../tooltip/ui.tooltip")),g,_=E(e("./ui.scheduler.publisher_mixin")),C,v=E(e("../../events/utils")),R,x=E(e("../../events/pointer")),z,y=E(e("../../core/dom_component")),b,D=E(e("../resizable")),A,w=E(e("../../localization/message")),$,k=E(e("../../localization/date"));function E(e){return e&&e.__esModule?e:{default:e}}var H="left right",S="top bottom",W=v.default.addNamespace(x.default.enter,"dxSchedulerAppointment"),B=v.default.addNamespace(x.default.leave,"dxSchedulerAppointment"),V="dx-scheduler-appointment-empty",F="dx-scheduler-all-day-appointment",G={horizontal:"dx-scheduler-appointment-horizontal",vertical:"dx-scheduler-appointment-vertical"},I="dx-scheduler-appointment-recurrence",N="dx-scheduler-appointment-compact",j="dx-scheduler-appointment-reduced",L="dx-scheduler-appointment-reduced-icon",M={head:"dx-scheduler-appointment-head",body:"dx-scheduler-appointment-body",tail:"dx-scheduler-appointment-tail"},O=y.default.inherit({_getDefaultOptions:function(){return(0,h.extend)(this.callBase(),{data:{},geometry:{top:0,left:0,width:0,height:0},allowDrag:!0,allowResize:!0,reduced:null,isCompact:!1,direction:"vertical",resizableConfig:{},cellHeight:0,cellWidth:0})},_optionChanged:function(e){switch(e.name){case"data":case"geometry":case"allowDrag":case"allowResize":case"reduced":case"sortedIndex":case"isCompact":case"direction":case"resizableConfig":case"cellHeight":case"cellWidth":this._invalidate();break;default:this.callBase(e)}},_getHorizontalResizingRule:function(){var e={head:this.option("rtlEnabled")?"right":"left",body:"",tail:this.option("rtlEnabled")?"left":"right"};return{handles:this.option("reduced")?e[this.option("reduced")]:"left right",minHeight:0,minWidth:this.invoke("getCellWidth"),step:this.invoke("getResizableStep")}},_getVerticalResizingRule:function(){var e=this.invoke("getCellHeight");return{handles:"top bottom",minWidth:0,minHeight:e,step:e}},_render:function(){this.callBase(),this._renderAppointmentGeometry(),this._renderEmptyClass(),this._renderCompactClass(),this._renderReducedAppointment(),this._renderAllDayClass(),this._renderDirection(),this.$element().data("dxAppointmentStartDate",this.option("startDate")),this.$element().attr("title",this.invoke("getField","text",this.option("data"))),this.$element().attr("role","button"),this._renderRecurrenceClass(),this._renderResizable()},_renderAppointmentGeometry:function(){var e=this.option("geometry"),t=this.$element();s.default.move(t,{top:e.top,left:e.left}),t.css({width:e.width<0?0:e.width,height:e.height<0?0:e.height})},_renderEmptyClass:function(){var e;(this.option("geometry").empty||this.option("isCompact"))&&this.$element().addClass(V)},_renderReducedAppointment:function(){var e=this.option("reduced");e&&(this.$element().toggleClass(j,!0).toggleClass(M[e],!0),this._renderAppointmentReducedIcon())},_renderAppointmentReducedIcon:function(){var e=(0,o.default)("<div>").addClass(L).appendTo(this.$element()),t=this._getEndDate(),i,n=[w.default.format("dxScheduler-editorLabelEndDate"),": ",k.default.format(t,"monthAndDay"),", ",k.default.format(t,"year")].join("");l.default.off(e,W),l.default.on(e,W,(function(){f.default.show({target:e,content:n})})),l.default.off(e,B),l.default.on(e,B,(function(){f.default.hide()}))},_getEndDate:function(){var e=this.invoke("getField","endDate",this.option("data"));return e?new Date(e):e},_renderAllDayClass:function(){this.$element().toggleClass(F,!!this.option("allDay"))},_renderRecurrenceClass:function(){var e=this.invoke("getField","recurrenceRule",this.option("data"));c.default.getRecurrenceRule(e).isValid&&this.$element().addClass(I)},_renderCompactClass:function(){this.$element().toggleClass(N,!!this.option("isCompact"))},_renderDirection:function(){this.$element().addClass(G[this.option("direction")])},_createResizingConfig:function(){var e="vertical"===this.option("direction")?this._getVerticalResizingRule():this._getHorizontalResizingRule();return e.roundStepValue=!0,this.invoke("isGroupedByDate")||(e.stepPrecision="strict"),e},_renderResizable:function(){this.option("allowResize")&&!this.option("isCompact")&&this._createComponent(this.$element(),D.default,(0,h.extend)(this._createResizingConfig(),this.option("resizableConfig")))}}).include(_.default);(0,p.default)("dxSchedulerAppointment",O),i.exports=O}

