function module(e,t,i){"use strict";var n,s=I(e("../core/renderer")),a,o=I(e("../events/core/events_engine")),u=e("../core/utils/common"),r=e("../core/utils/window"),h,l=I(e("../core/component_registrator")),d=e("../core/utils/extend"),p=e("../core/utils/type"),c,f=I(e("../events/utils")),g,_=I(e("../events/pointer")),v,m=I(e("../ui/scroll_view/ui.events.emitter.gesture.scroll")),H,x=I(e("../core/utils/size")),b,A=I(e("./text_box"));function I(e){return e&&e.__esModule?e:{default:e}}var E="dx-textarea",D="dx-texteditor-input",w="dx-texteditor-input-auto-resize",y=A.default.inherit({_getDefaultOptions:function(){return(0,d.extend)(this.callBase(),{spellcheck:!0,minHeight:void 0,maxHeight:void 0,autoResizeEnabled:!1})},_initMarkup:function(){this.$element().addClass("dx-textarea"),this.callBase(),this.setAria("multiline","true")},_renderContentImpl:function(){this._updateInputHeight(),this.callBase()},_renderInput:function(){this.callBase(),this._renderScrollHandler()},_createInput:function(){var e=(0,s.default)("<textarea>");return this._applyInputAttributes(e,this.option("inputAttr")),this._updateInputAutoResizeAppearance(e),e},_applyInputAttributes:function(e,t){e.attr(t).addClass("dx-texteditor-input")},_renderScrollHandler:function(){var e=this;this._eventY=0;var t=this._input(),i={validate:function(t){if(f.default.isDxMouseWheelEvent(t)&&(0,s.default)(t.target).is(e._input()))return!!e._allowScroll(-t.delta,t.shiftKey)&&(t._needSkipEvent=!0,!0)}};o.default.on(t,f.default.addNamespace(m.default.init,this.NAME),i,u.noop),o.default.on(t,f.default.addNamespace(_.default.down,this.NAME),this._pointerDownHandler.bind(this)),o.default.on(t,f.default.addNamespace(_.default.move,this.NAME),this._pointerMoveHandler.bind(this))},_pointerDownHandler:function(e){this._eventY=f.default.eventData(e).y},_pointerMoveHandler:function(e){var t=f.default.eventData(e).y,i=this._eventY-t;this._allowScroll(i)&&(e.isScrollingEvent=!0,e.stopPropagation()),this._eventY=t},_allowScroll:function(e,t){var i=this._input(),n=t?i.scrollLeft():i.scrollTop(),s=t?"Width":"Height",a=i.prop("scroll"+s)-i.prop("client"+s)-n,o,u,r;return(0!==n||0!==a)&&(!!(0===n&&e>=0||0===a&&e<=0||n>0&&a>0)||void 0)},_renderDimensions:function(){var e=this.$element(),t=e.get(0),i=this._getOptionValue("width",t),n=this._getOptionValue("height",t),s=this.option("minHeight"),a=this.option("maxHeight");e.css({minHeight:void 0!==s?s:"",maxHeight:void 0!==a?a:"",width:i,height:n})},_resetDimensions:function(){this.$element().css({height:"",minHeight:"",maxHeight:""})},_renderEvents:function(){this.option("autoResizeEnabled")&&o.default.on(this._input(),f.default.addNamespace("input paste",this.NAME),this._updateInputHeight.bind(this)),this.callBase()},_refreshEvents:function(){o.default.off(this._input(),f.default.addNamespace("input paste",this.NAME)),this.callBase()},_getHeightDifference:function(e){return x.default.getVerticalOffsets(this._$element.get(0),!1)+x.default.getVerticalOffsets(e.parent().get(0),!1)+x.default.getElementBoxParams("height",(0,r.getWindow)().getComputedStyle(e.get(0))).margin},_updateInputHeight:function(){var e=this._input(),t=void 0===this.option("height")&&this.option("autoResizeEnabled");if(t){this._resetDimensions(),this._$element.css("height",this._$element.outerHeight()),e.css("height",0);var i=this._getHeightDifference(e);this._renderDimensions();var n=this._getBoundaryHeight("minHeight"),s=this._getBoundaryHeight("maxHeight"),a=e[0].scrollHeight;if(void 0!==n&&(a=Math.max(a,n-i)),void 0!==s){var o=s-i,u=a>o;a=Math.min(a,o),this._updateInputAutoResizeAppearance(e,!u)}e.css("height",a),t&&this._$element.css("height","auto")}else e.css("height","")},_getBoundaryHeight:function(e){var t=this.option(e);if((0,p.isDefined)(t))return"number"==typeof t?t:x.default.parseHeight(t,this._input().get(0))},_renderInputType:u.noop,_visibilityChanged:function(e){e&&this._updateInputHeight()},_updateInputAutoResizeAppearance:function(e,t){if(e){var i=(0,u.ensureDefined)(t,this.option("autoResizeEnabled"));e.toggleClass("dx-texteditor-input-auto-resize",i)}},_optionChanged:function(e){switch(e.name){case"autoResizeEnabled":this._updateInputAutoResizeAppearance(this._input(),e.value),this._refreshEvents(),this._updateInputHeight();break;case"value":case"height":this.callBase(e),this._updateInputHeight();break;case"minHeight":case"maxHeight":this._renderDimensions(),this._updateInputHeight();break;case"visible":this.callBase(e),e.value&&this._updateInputHeight();break;default:this.callBase(e)}}});(0,l.default)("dxTextArea",y),i.exports=y,i.exports.default=i.exports}

