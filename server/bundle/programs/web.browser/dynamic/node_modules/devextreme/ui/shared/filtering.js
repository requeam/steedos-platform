function module(e,t,r){"use strict";var a=e("../../core/utils/type"),n=e("../../core/utils/array").inArray,i=e("../../core/utils/iterator"),u=["year","month","day"],s=["year","month","day","hour","minute"],l,o,c,d,h,p,f;r.exports=(l=function(e,t){var r=e.dataField||e.selector;return"search"===t&&(r=e.displayField||e.calculateDisplayValue||r),r},o=function(e){return e.getHours()+e.getMinutes()+e.getSeconds()+e.getMilliseconds()<1},c=function(e){return"date"===e||"datetime"===e},d=function(e){return a.isDate(e)?[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]:i.map((""+e).split("/"),(function(e,t){return 1===t?Number(e)-1:Number(e)}))},h=function(e,t){var r,n,i,u=this,s=l(this,t);if(Array.isArray(e)&&a.isDefined(e[0])&&a.isDefined(e[1]))return n=[s,">=",e[0]],i=[s,"<=",e[1]],c(this.dataType)&&o(e[1])&&((r=new Date(e[1].getTime())).setDate(e[1].getDate()+1),i=[s,"<",r]),[n,"and",i]},p=function(e,t,a){var n,i,u,s=this,o=d(e),c=l(this,a);switch("headerFilter"===a?u=r.exports.getGroupInterval(this)[o.length-1]:"datetime"===this.dataType&&(u="minute"),u){case"year":n=new Date(o[0],0,1),i=new Date(o[0]+1,0,1);break;case"month":n=new Date(o[0],o[1],1),i=new Date(o[0],o[1]+1,1);break;case"quarter":n=new Date(o[0],3*o[1],1),i=new Date(o[0],3*o[1]+3,1);break;case"hour":n=new Date(o[0],o[1],o[2],o[3]),i=new Date(o[0],o[1],o[2],o[3]+1);break;case"minute":n=new Date(o[0],o[1],o[2],o[3],o[4]),i=new Date(o[0],o[1],o[2],o[3],o[4]+1);break;case"second":n=new Date(o[0],o[1],o[2],o[3],o[4],o[5]),i=new Date(o[0],o[1],o[2],o[3],o[4],o[5]+1);break;default:n=new Date(o[0],o[1],o[2]),i=new Date(o[0],o[1],o[2]+1)}switch(t){case"<":return[c,"<",n];case"<=":return[c,"<",i];case">":return[c,">=",i];case">=":return[c,">=",n];case"<>":return[[c,"<",n],"or",[c,">=",i]];default:return[[c,">=",n],"and",[c,"<",i]]}},f=function(e,t,n){var i=this,u=l(this,n),s=r.exports.getGroupInterval(this);if("headerFilter"===n&&s&&a.isDefined(e)){var o,c,d,h=(""+e).split("/"),p=Number(h[h.length-1]),f;return[c=[u,">=",p],"and",d=[u,"<",p+(o=s[h.length-1])]]}return[u,t||"=",e]},{defaultCalculateFilterExpression:function(e,t,r){var n=this,i=l(n,r),u=n.calculateDisplayValue&&"search"===r,s=u&&n.lookup&&n.lookup.dataType||n.dataType,o=null;if("headerFilter"!==r&&"filterBuilder"!==r||null!==e)if("string"!==s||n.lookup&&!u){if("between"===t)return h.apply(n,[e,r]);if(c(s)&&a.isDefined(e))return p.apply(n,arguments);if("number"===s)return f.apply(n,arguments);"object"!==s&&(o=[i,t||"=",e])}else o=[i,t||"contains",e];else o=[i,t||"=",null],"string"===s&&(o=[o,"="===t?"or":"and",[i,t||"=",""]]);return o},getGroupInterval:function(e){var t,r=[],i=["year","month","day","hour","minute","second"],l=e.headerFilter&&e.headerFilter.groupInterval,o="quarter"===l?"month":l;return c(e.dataType)&&null!==l?(r="datetime"===e.dataType?s:u,(t=n(o,i))>=0?((r=i.slice(0,t)).push(l),r):r):a.isDefined(l)?Array.isArray(l)?l:[l]:void 0}})}

