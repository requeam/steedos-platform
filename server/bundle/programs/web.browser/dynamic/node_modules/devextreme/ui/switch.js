function module(e,t,i){"use strict";var n=e("../core/renderer"),s=e("../events/core/events_engine"),a=e("../core/devices"),r=e("../core/utils/extend").extend,o=e("./widget/utils.ink_ripple"),h=e("../core/component_registrator"),l=e("./editor/editor"),d=e("../events/utils"),c=e("../events/core/emitter.feedback"),f=e("./themes"),_=e("../animation/fx"),u=e("../localization/message"),p=e("../events/click"),v=e("../events/gesture/swipeable"),m=e("../core/utils/deferred").Deferred,w="dx-switch",g="dx-switch-wrapper",b="dx-switch-container",x="dx-switch-inner",O="dx-switch-handle",$="dx-switch-on-value",k="dx-switch-on",I="dx-switch-off",S=100,C=l.inherit({_supportedKeys:function(){var e=this.option("rtlEnabled"),t=function(e){e.preventDefault(),this._clickAction({event:e})},i=function(e,t){t.preventDefault(),t.stopPropagation(),this._animateValue(e)};return r(this.callBase(),{space:t,enter:t,leftArrow:i.bind(this,!!e),rightArrow:i.bind(this,!e)})},_getDefaultOptions:function(){return r(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,switchedOnText:this._getLocalizationMessage("On"),switchedOffText:this._getLocalizationMessage("Off"),value:!1,useInkRipple:!1,_animateHandle:!0})},_defaultOptionsRules:function(){var e=f.current();return this.callBase().concat([{device:function(){return"desktop"===a.real().deviceType&&!a.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return f.isAndroid5(e)},options:{useInkRipple:!0}},{device:function(t){return f.isIos7(e)},options:{_animateHandle:!1}}])},_setDeprecatedOptions:function(){this.callBase(),r(this._deprecatedOptions,{onText:{since:"18.2",alias:"switchedOnText"},offText:{since:"18.2",alias:"switchedOffText"}})},_getLocalizationMessage:function(e){var t=u.format("dxSwitch-switched"+e+"Text"),i=u.format("dxSwitch-"+e.toLowerCase()+"Text");return t||i},_feedbackHideTimeout:0,_animating:!1,_initMarkup:function(){this._renderContainers(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-switch").append(this._$switchWrapper),this._renderSubmitElement(),this._renderClick(),this.setAria("role","button"),this._renderSwipeable(),this.callBase(),this._renderSwitchInner(),this._renderLabels(),this._renderValue()},_getInnerOffset:function(e,t){var i;return 100*((t-this._offsetDirection()*Number(!e))/2)+"%"},_getHandleOffset:function(e,t){var i;return this.option("rtlEnabled")&&(e=!e),e?100*-t-100+"%":100*-t+"%"},_renderSwitchInner:function(){this._$switchInner=n("<div>").addClass("dx-switch-inner").appendTo(this._$switchContainer),this._$handle=n("<div>").addClass("dx-switch-handle").appendTo(this._$switchInner)},_renderLabels:function(){this._$labelOn=n("<div>").addClass("dx-switch-on").prependTo(this._$switchInner),this._$labelOff=n("<div>").addClass("dx-switch-off").appendTo(this._$switchInner),this._setLabelsText()},_renderContainers:function(){this._$switchContainer=n("<div>").addClass("dx-switch-container"),this._$switchWrapper=n("<div>").addClass("dx-switch-wrapper").append(this._$switchContainer)},_renderSwipeable:function(){this._createComponent(this.$element(),v,{elastic:!1,immediate:!0,onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._getItemSizeFunc.bind(this)})},_getItemSizeFunc:function(){return this._$switchContainer.outerWidth(!0)-this._$handle.get(0).getBoundingClientRect().width},_renderSubmitElement:function(){this._$submitElement=n("<input>").attr("type","hidden").appendTo(this.$element())},_getSubmitElement:function(){return this._$submitElement},_renderInkRipple:function(){this._inkRipple=o.render({waveSizeCoefficient:1.7,isCentered:!0,useHoldAnimation:!1,wavesNumber:2})},_renderInkWave:function(e,t,i,n){if(this._inkRipple){var s={element:e,event:t,wave:n};i?this._inkRipple.showWave(s):this._inkRipple.hideWave(s)}},_updateFocusState:function(e,t){this.callBase.apply(this,arguments),this._renderInkWave(this._$handle,e,t,0)},_toggleActiveState:function(e,t,i){this.callBase.apply(this,arguments),this._renderInkWave(this._$handle,i,t,1)},_offsetDirection:function(){return this.option("rtlEnabled")?-1:1},_renderPosition:function(e,t){var i=this._getInnerOffset(e,t),n=this._getHandleOffset(e,t);this.option("_animateHandle")&&(this._$switchInner.css("transform"," translateX("+i+")"),this._$handle.css("transform"," translateX("+n+")"))},_validateValue:function(){var e=this.option("value");"boolean"!=typeof e&&(this._options.value=!!e)},_renderClick:function(){var e=d.addNamespace(p.name,this.NAME),t=this.$element();this._clickAction=this._createAction(this._clickHandler.bind(this)),s.off(t,e),s.on(t,e,function(e){this._clickAction({event:e})}.bind(this))},_clickHandler:function(e){var t=e.event;this._saveValueChangeEvent(t),this._animating||this._swiping||this._animateValue(!this.option("value"))},_animateValue:function(e){var t=this.option("value"),i=e;if(t!==i){this._animating=!0;var n=this._getInnerOffset(t,0),s=this._getInnerOffset(i,0),a=this._getHandleOffset(t,0),r=this._getHandleOffset(i,0),o=this,h={},l={},d={},c={};h.transform=" translateX("+n+")",l.transform=" translateX("+s+")",d.transform=" translateX("+a+")",c.transform=" translateX("+r+")",this.$element().toggleClass("dx-switch-on-value",i),_.animate(this._$handle,{from:d,to:c,duration:100}),_.animate(this._$switchInner,{from:h,to:l,duration:100,complete:function(){o._animating=!1,o.option("value",i)}})}},_swipeStartHandler:function(e){var t=this.option("value"),i=this.option("rtlEnabled"),n=i?0:1,s=i?1:0;e.event.maxLeftOffset=t?n:s,e.event.maxRightOffset=t?s:n,this._swiping=!0,this._feedbackDeferred=new m,c.lock(this._feedbackDeferred),this._toggleActiveState(this.$element(),this.option("activeStateEnabled"))},_swipeUpdateHandler:function(e){this._renderPosition(this.option("value"),e.event.offset)},_swipeEndHandler:function(e){var t=this,i=this._offsetDirection(),n={},s={},a=this._getInnerOffset(t.option("value"),e.event.targetOffset),r=this._getHandleOffset(t.option("value"),e.event.targetOffset);n.transform=" translateX("+a+")",s.transform=" translateX("+r+")",_.animate(this._$handle,{to:s,duration:100}),_.animate(this._$switchInner,{to:n,duration:100,complete:function(){t._swiping=!1;var n=t.option("value")+i*e.event.targetOffset;t.option("value",Boolean(n)),t._feedbackDeferred.resolve(),t._toggleActiveState(t.$element(),!1)}})},_renderValue:function(){this._validateValue();var e=this.option("value");this._renderPosition(e,0),this.$element().toggleClass("dx-switch-on-value",e),this._$submitElement.val(e),this.setAria({pressed:e,label:e?this.option("switchedOnText"):this.option("switchedOffText")})},_setLabelsText:function(){this._$labelOn&&this._$labelOn.text(this.option("switchedOnText")),this._$labelOff&&this._$labelOff.text(this.option("switchedOffText"))},_visibilityChanged:function(e){e&&this.repaint()},_optionChanged:function(e){switch(e.name){case"useInkRipple":this._invalidate();break;case"width":delete this._marginBound,this._refresh();break;case"switchedOnText":case"switchedOffText":this._setLabelsText();break;case"value":this._renderValue(),this.callBase(e);break;case"_animateHandle":break;default:this.callBase(e)}},_clean:function(){delete this._inkRipple,this.callBase()}});h("dxSwitch",C),i.exports=C,i.exports.default=i.exports}

