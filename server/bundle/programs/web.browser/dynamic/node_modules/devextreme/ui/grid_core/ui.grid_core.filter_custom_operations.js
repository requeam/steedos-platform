function module(e,t){"use strict";var r=e("../filter_builder/filter_builder"),i=e("../../core/renderer"),n=e("../../localization/message"),l=e("../../core/utils/extend").extend,a=e("../../data/data_source/data_source"),o=e("../../core/utils/deferred"),u=e("../filter_builder/utils");function d(e){var t=function(e,t){var r=[],i=e.length-1;return e&&e.forEach((function(e,n){if(u.isCondition(e)||u.isGroup(e)){var l=u.getFilterExpression(e,[t],[],"headerFilter");r.push(l)}else r.push(u.getFilterExpression([t.dataField,"=",e],[t],[],"headerFilter"));n!==i&&r.push("or")})),1===r.length&&(r=r[0]),r},n=function(e,t){return t?t+"/"+e:e},d=function e(t,r){var i=[];return t.forEach((function(t){if(t.items){var l=e(t.items,n(t.text,r));i=i.concat(l)}t.selected&&i.push(n(t.text,r))})),i},c=e&&e.getController("headerFilter"),s;return{dataTypes:["string","date","datetime","number","boolean","object"],calculateFilterExpression:t,editorTemplate:function(t,n){var a=i("<div>").addClass("dx-filterbuilder-item-value-text").appendTo(n),o=l(!0,{},e.columnOption(t.field.dataField));(0,r.renderValueText)(a,t.text&&t.text.split("|"));var u=function(e){t.setValue(e)};return o.filterType="include",o.filterValues=t.value?t.value.slice():[],c.showHeaderFilterMenuBase({columnElement:a,column:o,apply:function(){u(this.filterValues),c.hideHeaderFilterMenu()},onHidden:function(){t.closeEditor()},isFilterBuilder:!0}),n},customizeText:function(t){var r=t.value,i=e.columnOption(t.field.dataField),n=i&&i.headerFilter,u=i&&i.lookup,s;if(n&&n.dataSource||u&&u.dataSource){i=l({},i,{filterType:"include",filterValues:[r]});var f=c.getDataSource(i),p;f.paginate=!1,!(n&&n.dataSource)&&u.items&&(f.store=u.items);var m=new a.DataSource(f),v=new o.Deferred;return m.load().done((function(e){v.resolve(d(e)[0])})),v}return c.getHeaderItemText(r,i,0,e.option("headerFilter"))}}}function c(e){return l(d(e),{name:"anyof",icon:"selectall",caption:n.format("dxFilterBuilder-filterOperationAnyOf")})}function s(e){var t=d(e);return l({},t,{calculateFilterExpression:function(e,r){var i=t.calculateFilterExpression(e,r);return i&&0!==i.length?"!"===i[0]?i:["!",i]:null},name:"noneof",icon:"unselectall",caption:n.format("dxFilterBuilder-filterOperationNoneOf")})}t.anyOf=c,t.noneOf=s}

