function module(e,t,a){"use strict";var n,r=v(e("../../core/renderer")),o=e("../../core/utils/common"),i=e("../../core/utils/type"),l=e("../shared/filtering"),u=e("../../core/utils/string"),d=e("../../core/utils/iterator"),s=e("../../core/utils/extend"),c=e("../../core/utils/data"),f,g=v(e("../load_panel")),p=e("../../data/utils"),m,h=v(e("../../format_helper")),x=e("../../core/utils/object"),y=e("../../core/utils/window");function v(e){return e&&e.__esModule?e:{default:e}}var C="dx-selection-disabled",T="dx-datagrid-group-opened",b="dx-datagrid-group-closed",D="dx-datagrid-expand",S="nodata",F={year:function(e){return e&&e.getFullYear()},month:function(e){return e&&e.getMonth()+1},day:function(e){return e&&e.getDate()},quarter:function(e){return e&&Math.floor(e.getMonth()/3)+1},hour:function(e){return e&&e.getHours()},minute:function(e){return e&&e.getMinutes()},second:function(e){return e&&e.getSeconds()}},I,V,E,z;a.exports=(I=function(){var e,t,a=arguments[1],n=this.calculateCellValue(a);return(0,i.isDefined)(n)?E(this.dataType)?(t=arguments[0],F[t](n)):"number"===this.dataType?(e=arguments[0],Math.floor(Number(n)/e)*e):void 0:null},V=function(e,t){return(0,i.isFunction)(e)&&(0,i.isFunction)(t)&&e.originalCallback&&t.originalCallback?e.originalCallback===t.originalCallback:e===t},{renderNoDataText:function(e){var t=this;if(e=e||this.element()){var a=this.addWidgetPrefix("nodata"),n=e.find("."+a).last(),o=this._dataController.isEmpty(),i=this._dataController.isLoading();n.length||(n=(0,r.default)("<span>").addClass(a).appendTo(e)),o&&!i?n.removeClass("dx-hidden").text(this._getNoDataText()):n.addClass("dx-hidden")}},renderLoadPanel:function(e,t,a){var n,o=this;this._loadPanel&&this._loadPanel.$element().remove(),(n=this.option("loadPanel"))&&("auto"===n.enabled?!a:n.enabled)?(n=(0,s.extend)({shading:!1,message:n.text,position:function(){var t=(0,r.default)((0,y.getWindow)());return e.height()>t.height()?{of:t,boundary:e,collision:"fit"}:{of:e}},container:t},n),this._loadPanel=this._createComponent((0,r.default)("<div>").appendTo(t),g.default,n)):this._loadPanel=null},getIndexByKey:function(e,t,a){var n,r=-1;if(void 0!==e&&Array.isArray(t)){a=arguments.length<=2?"key":a;for(var l=0;l<t.length;l++)if(n=(0,i.isDefined)(a)?t[l][a]:t[l],(0,o.equalByValue)(e,n)){r=l;break}}return r},combineFilters:function(e,t){var a,n=[];for(t=t||"and",a=0;a<e.length;a++)e[a]&&(n.length&&n.push(t),n.push(e[a]));if(1===n.length&&(n=n[0]),n.length)return n},checkChanges:function(e,t){var a,n=0;for(a=0;a<t.length;a++)e[t[a]]&&n++;return e.length&&e.length===n},equalFilterParameters:function(e,t){var n;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!a.exports.equalFilterParameters(e[n],t[n]))return!1;return!0}return(0,i.isFunction)(e)&&e.columnIndex>=0&&(0,i.isFunction)(t)&&t.columnIndex>=0?e.columnIndex===t.columnIndex&&(0,c.toComparable)(e.filterValue)===(0,c.toComparable)(t.filterValue):(0,c.toComparable)(e)==(0,c.toComparable)(t)},proxyMethod:function(e,t,a){e[t]||(e[t]=function(){var e=this._dataSource;return e?e[t].apply(e,arguments):a})},formatValue:function(e,t){var a=h.default.format(e,t.format)||e&&e.toString()||"",n={value:e,valueText:t.getDisplayFormat?t.getDisplayFormat(a):a,target:t.target||"row",groupInterval:t.groupInterval};return t.customizeText?t.customizeText.call(t,n):n.valueText},getFormatOptionsByColumn:function(e,t){return{format:e.format,getDisplayFormat:e.getDisplayFormat,customizeText:e.customizeText,target:t,trueText:e.trueText,falseText:e.falseText}},getDisplayValue:function(e,t,a,n){return e.displayValueMap&&void 0!==e.displayValueMap[t]?e.displayValueMap[t]:e.calculateDisplayValue&&a&&"group"!==n?e.calculateDisplayValue(a):!e.lookup||"group"===n&&(e.calculateGroupValue||e.calculateDisplayValue)?t:e.lookup.calculateCellValue(t)},getGroupRowSummaryText:function(e,t){var n,r,o="(";for(n=0;n<e.length;n++)r=e[n],o+=(n>0?", ":"")+a.exports.getSummaryText(r,t);return o+")"},getSummaryText:function(e,t){var a=e.displayFormat||e.columnCaption&&t[e.summaryType+"OtherColumn"]||t[e.summaryType];return this.formatValue(e.value,{format:e.valueFormat,getDisplayFormat:function(t){return a?(0,u.format)(a,t,e.columnCaption):t},customizeText:e.customizeText})},normalizeSortingInfo:function(e){var t,a;for(e=e||[],t=(0,p.normalizeSortingInfo)(e),a=0;a<e.length;a++)e&&e[a]&&void 0!==e[a].isExpanded&&(t[a].isExpanded=e[a].isExpanded),e&&e[a]&&void 0!==e[a].groupInterval&&(t[a].groupInterval=e[a].groupInterval);return t},getFormatByDataType:function(e){switch(e){case"date":return"shortDate";case"datetime":return"shortDateShortTime"}},getHeaderFilterGroupParameters:function(e,t){var a=[],n=e.dataField||e.name,r=(0,l.getGroupInterval)(e);return r?((0,d.each)(r,(function(o,i){a.push(t?{selector:n,groupInterval:i,isExpanded:o<r.length-1}:I.bind(e,i))})),a):(t?a=[{selector:n,isExpanded:!1}]:(a=function t(a){var t=e.calculateCellValue(a);return void 0!==t&&""!==t||(t=null),t},e.sortingMethod&&(a=[{selector:a,compare:e.sortingMethod.bind(e)}])),a)},equalSortParameters:function(e,t,n){var r;if(e=a.exports.normalizeSortingInfo(e),t=a.exports.normalizeSortingInfo(t),Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(!V(e[r].selector,t[r].selector)||e[r].desc!==t[r].desc||e[r].groupInterval!==t[r].groupInterval||!n&&Boolean(e[r].isExpanded)!==Boolean(t[r].isExpanded))return!1;return!0}return(!e||!e.length)==(!t||!t.length)},getPointsByColumns:function(e,t,a,n){var r,o,i,l,u,d,s=e.length,c=!1,f=n||0,g=[];for(o=0;o<=s;o++)o<s&&(l=(i=e.eq(o)).offset(),d="rtl"===i.css("direction")),r={index:f,x:l?l.left+(!a&&d^o===s?i[0].getBoundingClientRect().width:0):0,y:l?l.top+(a&&o===s?i[0].getBoundingClientRect().height:0):0,columnIndex:f},!a&&o>0&&(u=e.eq(o-1).offset()).top<r.y&&(r.y=u.top),t&&(c=t(r)),c||g.push(r),f++;return g},createObjectWithChanges:function(e,t){var a=e?Object.create(Object.getPrototypeOf(e)):{},n=(0,s.extendFromObject)({},e);return(0,x.deepExtendArraySafe)(a,n,!0,!0),(0,x.deepExtendArraySafe)(a,t,!0,!0)},getExpandCellTemplate:function(){return{allowRenderToDetachedContainer:!0,render:function(e,t){var a,n=(0,r.default)(e);!(0,i.isDefined)(t.value)||t.data&&t.data.isContinuation||t.row.inserted?z(n):(a=t.component.getView("rowsView"),n.addClass("dx-datagrid-expand").addClass("dx-selection-disabled"),(0,r.default)("<div>").addClass(t.value?"dx-datagrid-group-opened":"dx-datagrid-group-closed").appendTo(n),a.setAria("label",t.value?a.localize("dxDataGrid-ariaCollapse"):a.localize("dxDataGrid-ariaExpand"),n))}}},setEmptyText:z=function(e){e.get(0).textContent="Â "},isDateType:E=function(e){return"date"===e||"datetime"===e},getSelectionRange:function(e){try{if(e)return{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd}}catch(t){}return{}},setSelectionRange:function(e,t){try{e&&e.setSelectionRange&&e.setSelectionRange(t.selectionStart,t.selectionEnd)}catch(a){}},getLastResizableColumnIndex:function(e,t){for(var a=e.some((function(e){return e&&!e.command&&!e.fixed&&!1!==e.allowResizing})),n=e.length-1;e[n];n--){var r=e[n],o=t&&t[n],i=!a||!1!==r.allowResizing;if(!r.command&&!r.fixed&&"adaptiveHidden"!==o&&i)break}return n}})}

