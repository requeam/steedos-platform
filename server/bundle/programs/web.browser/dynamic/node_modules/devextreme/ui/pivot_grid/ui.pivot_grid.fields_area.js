function module(e,t){"use strict";var o=e("../../core/renderer"),n=e("../../core/utils/common").noop,a=e("../../core/utils/iterator").each,i=e("./ui.pivot_grid.area_item"),r=e("./ui.pivot_grid.utils"),d=e("../popup"),s=e("../button"),p="<div>";e("./ui.pivot_grid.field_chooser_base");var l="dx-pivotgrid-drag-action";function u(e,t,n,a){n&&n.groupName&&n.groupName===e.groupName&&o(p).addClass("dx-group-connector").addClass("dx-group-connector-prev").appendTo(a),t&&t.groupName&&t.groupName===e.groupName&&o(p).addClass("dx-group-connector").addClass("dx-group-connector-next").appendTo(a)}t.FieldsArea=i.AreaItem.inherit({ctor:function(e,t){this.callBase(e),this._area=t},_getAreaName:function(){return"fields"},_createGroupElement:function(){return o(p).addClass("dx-pivotgrid-fields-area").addClass("dx-area-fields").addClass(l).attr("group",this._area)},isVisible:function(){return!!this.option("fieldPanel.visible")&&this.option("fieldPanel.show"+r.capitalizeFirstLetter(this._area)+"Fields")},_renderButton:function(e){var t=this,n=o("<td>").appendTo(o("<tr>").appendTo(e)),a;t.component._createComponent(o(p).appendTo(n),s,{text:"Fields",icon:"menu",width:"auto",onClick:function(){var e=t.tableElement().find(".dx-fields-area-popup").dxPopup("instance");e.option("visible")||e.show()}}).$element().addClass("dx-pivotgrid-fields-area-hamburger")},_getPopupOptions:function(e,t){return{contentTemplate:function(){return o("<table>").addClass("dx-area-field-container").append(o("<thead>").addClass("dx-pivotgrid-fields-area-head").append(e))},height:"auto",width:"auto",position:{at:"left",my:"left",of:t},dragEnabled:!1,animation:{show:{type:"pop",duration:200}},shading:!1,showTitle:!1,closeOnOutsideClick:!0,container:t.parent()}},_renderPopup:function(e,t){var n=this,a=e.find(".dx-button"),i=this._getPopupOptions(t,a),r=this.component.$element().dxPivotGridFieldChooserBase("instance");this._rowPopup&&this._rowPopup.$element().remove(),this._rowPopup=this.component._createComponent(o(p).appendTo(e),d,i),this._rowPopup.$element().addClass("dx-fields-area-popup"),this._rowPopup.content().addClass("dx-pivotgrid-fields-container"),this._rowPopup.content().parent().attr("group","row"),r.subscribeToEvents(this._rowPopup.content()),r.renderSortable(this._rowPopup.content())},_shouldCreateButton:function(){return!1},_renderTableContent:function(e,t){var n=this,i=this.groupElement(),r=this.isVisible(),d=n.component.$element().dxPivotGridFieldChooserBase("instance"),s=o("<thead>").addClass("dx-pivotgrid-fields-area-head").appendTo(e),l=n._area,c=o("<tr>");i.toggleClass("dx-hidden",!r),e.addClass("dx-area-field-container"),r&&(a(t,(function(e,a){if(a.area===l&&!1!==a.visible){var i=o("<td>").append(d.renderField(a,"row"===a.area)),r=i.find(".dx-column-indicators");r.length&&n._shouldCreateButton()&&r.insertAfter(r.next()),i.appendTo(c),u(a,t[e+1],t[e-1],i)}})),c.children().length||o("<td>").append(o(p).addClass("dx-empty-area-text").text(this.option("fieldPanel.texts."+l+"FieldArea"))).appendTo(c),n._shouldCreateButton()?(n._renderButton(s),n._renderPopup(e,c)):s.append(c))},reset:function(){this.callBase(),this.groupElement().css("marginTop",0)},_renderVirtualContent:n})}

