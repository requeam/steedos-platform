function module(e,t){"use strict";var i=e("./scatter_series").chart,r=e("./bar_series").chart.bar,o=e("../../core/utils/extend").extend,l=e("../../core/utils/type").isDefined,s=e("../core/utils").normalizeEnum,n=e("../../core/utils/common").noop,a=10;t.stock=o({},i,{_animate:n,_applyMarkerClipRect:function(e){e["clip-path"]=this._forceClipping?this._paneClipRectID:this._widePaneClipRectID},_updatePointsVisibility:r._updatePointsVisibility,_getOptionsForPoint:r._getOptionsForPoint,getErrorBarRangeCorrector:n,_createErrorBarGroup:n,areErrorBarsVisible:n,_createGroups:i._createGroups,_setMarkerGroupSettings:function(){var e=this,t=this._markersGroup,i=this._createPointStyles(this._getMarkerGroupOptions()),r=o(i.normal,{class:"default-markers"}),l=o(i.positive.normal,{class:"default-positive-markers"}),s=o(i.reduction.normal,{class:"reduction-markers"}),n=o(i.reductionPositive.normal,{class:"reduction-positive-markers"}),a={class:"dxc-markers"};this._applyMarkerClipRect(a),t.attr(a),this._createGroup("defaultMarkersGroup",t,t,r),this._createGroup("reductionMarkersGroup",t,t,s),this._createGroup("defaultPositiveMarkersGroup",t,t,l),this._createGroup("reductionPositiveMarkersGroup",t,t,n)},_setGroupsSettings:function(){i._setGroupsSettings.call(this,!1)},_getCreatingPointOptions:function(){var e,t=this,i=this._predefinedPointOptions;return i||(e=this._getPointOptions(),this._predefinedPointOptions=i=o(!0,{styles:{}},e),i.styles.normal=i.styles.positive.normal=i.styles.reduction.normal=i.styles.reductionPositive.normal={"stroke-width":e.styles&&e.styles.normal&&e.styles.normal["stroke-width"]}),i},_checkData:function(e,t){var r=this.getValueFields();return i._checkData.call(this,e,t,{openValue:r[0],highValue:r[1],lowValue:r[2],closeValue:r[3]})&&e.highValue==e.highValue&&e.lowValue==e.lowValue},_getPointDataSelector:function(e,t){var i=this,r,o=this,n=o.getValueFields(),a=o.getArgumentField(),u=n[0],c=n[1],h=n[2],p=n[3];switch(o.level=o._options.reduction.level,s(o.level)){case"open":r=u;break;case"high":r=c;break;case"low":r=h;break;default:r=p,o.level="close"}var d=void 0;return function(e){var t=e[r],s=!1;return l(t)&&(l(d)&&(s=t<d),d=t),{argument:e[a],highValue:i._processEmptyValue(e[c]),lowValue:i._processEmptyValue(e[h]),closeValue:i._processEmptyValue(e[p]),openValue:i._processEmptyValue(e[u]),reductionValue:t,tag:e[o.getTagField()],isReduction:s,data:e}}},_parsePointStyle:function(e,t,i){return{stroke:e.color||t,"stroke-width":e.width,fill:e.color||i}},_getDefaultStyle:function(e){var t=this,i=e.color||this._options.mainSeriesColor;return{normal:this._parsePointStyle(e,i,i),hover:this._parsePointStyle(e.hoverStyle,i,i),selection:this._parsePointStyle(e.selectionStyle,i,i)}},_getReductionStyle:function(e){var t=this,i=e.reduction.color;return{normal:this._parsePointStyle({color:i,width:e.width,hatching:e.hatching},i,i),hover:this._parsePointStyle(e.hoverStyle,i,i),selection:this._parsePointStyle(e.selectionStyle,i,i)}},_createPointStyles:function(e){var t,i,r,l=this,s=this._options.innerColor,n=this._getDefaultStyle(e);return t=o(!0,{},n),i=this._getReductionStyle(e),r=o(!0,{},i),t.normal.fill=t.hover.fill=t.selection.fill=s,r.normal.fill=r.hover.fill=r.selection.fill=s,n.positive=t,n.reduction=i,n.reductionPositive=r,n},_endUpdateData:function(){delete this._predefinedPointOptions},_defaultAggregator:"ohlc",_aggregators:{ohlc:function(e,t){var i=e.intervalStart,r=e.data;if(r.length){var o={},l=t.getValueFields(),s=l[1],n=l[2];return o[s]=-1/0,o[n]=1/0,(o=r.reduce((function(e,t){return null!==t[s]&&(e[s]=Math.max(e[s],t[s])),null!==t[n]&&(e[n]=Math.min(e[n],t[n])),e}),o))[l[0]]=r[0][l[0]],o[l[3]]=r[r.length-1][l[3]],isFinite(o[s])||(o[s]=null),isFinite(o[n])||(o[n]=null),o[t.getArgumentField()]=i,o}}},getValueFields:function(){var e=this._options;return[e.openValueField||"open",e.highValueField||"high",e.lowValueField||"low",e.closeValueField||"close"]},getArgumentField:function(){return this._options.argumentField||"date"},_patchMarginOptions:function(e){var t,i=this._getCreatingPointOptions().styles,r=[i.normal,i.hover,i.selection].reduce((function(e,t){return Math.max(e,t["stroke-width"])}),0);return e.size=10+r,e.sizePointNormalState=10,e}}),t.candlestick=o({},t.stock,{_parsePointStyle:function(e,i,r){var o=e.color||r,l=t.stock._parsePointStyle.call(this,e,i,o);return l.fill=o,l.hatching=e.hatching,l}})}

