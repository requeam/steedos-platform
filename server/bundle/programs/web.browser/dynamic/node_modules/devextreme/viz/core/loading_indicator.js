function module(i,t){"use strict";var n=i("./utils").patchFontOptions,o=0,a=1,e="linear",d=400,s="loadingIndicatorReady";function r(i){var t=this,n=i.renderer;this._group=n.g().attr({class:"dx-loading-indicator"}).linkOn(n.root,{name:"loading-indicator",after:"peripheral"}),this._rect=n.rect().attr({opacity:0}).append(this._group),this._text=n.text().attr({align:"center"}).append(this._group),this._createStates(i.eventTrigger,this._group,n.root,i.notify)}r.prototype={constructor:r,_createStates:function(i,t,n,o){var a=this;this._states=[{opacity:0,start:function(){o(!1)},complete:function(){t.linkRemove(),n.css({"pointer-events":""}),i("loadingIndicatorReady")}},{opacity:.85,start:function(){t.linkAppend(),n.css({"pointer-events":"none"}),o(!0)},complete:function(){i("loadingIndicatorReady")}}],this._state=0},setSize:function(i){var t=i.width,n=i.height;this._rect.attr({width:t,height:n}),this._text.attr({x:t/2,y:n/2})},setOptions:function(i){this._rect.attr({fill:i.backgroundColor}),this._text.css(n(i.font)).attr({text:i.text}),this[i.show?"show":"hide"]()},dispose:function(){var i=this;this._group.linkRemove().linkOff(),this._group=this._rect=this._text=this._states=null},_transit:function(i){var t,n=this;this._state!==i&&(this._state=i,this._isHiding=!1,t=this._states[i],this._rect.stopAnimation().animate({opacity:t.opacity},{complete:t.complete,easing:"linear",duration:400,unstoppable:!0}),this._noHiding=!0,t.start(),this._noHiding=!1)},show:function(){this._transit(1)},hide:function(){this._transit(0)},scheduleHiding:function(){this._noHiding||(this._isHiding=!0)},fulfillHiding:function(){this._isHiding&&this.hide()}},t.LoadingIndicator=r,t.plugin={name:"loading_indicator",init:function(){var i=this;function n(t){i._skipLoadingIndicatorOptions=!0,i.option("loadingIndicator",{show:t}),i._skipLoadingIndicatorOptions=!1,t&&i._hideTooltip&&i._hideTooltip()}i._loadingIndicator=new t.LoadingIndicator({eventTrigger:i._eventTrigger,renderer:i._renderer,notify:n}),i._scheduleLoadingIndicatorHiding()},dispose:function(){this._loadingIndicator.dispose(),this._loadingIndicator=null},members:{_scheduleLoadingIndicatorHiding:function(){this._loadingIndicator.scheduleHiding()},_fulfillLoadingIndicatorHiding:function(){this._loadingIndicator.fulfillHiding()},showLoadingIndicator:function(){this._loadingIndicator.show()},hideLoadingIndicator:function(){this._loadingIndicator.hide()},_onBeginUpdate:function(){this._optionChangedLocker||this._scheduleLoadingIndicatorHiding()}},customize:function(i){var t=i.prototype;if(t._dataSourceChangedHandler){var n=t._dataSourceChangedHandler;t._dataSourceChangedHandler=function(){this._scheduleLoadingIndicatorHiding(),n.apply(this,arguments)}}var o=t._setContentSize;t._setContentSize=function(){o.apply(this,arguments),this._loadingIndicator.setSize(this._canvas)},i.addChange({code:"LOADING_INDICATOR",handler:function(){this._skipLoadingIndicatorOptions||this._loadingIndicator.setOptions(this._getOption("loadingIndicator")),this._scheduleLoadingIndicatorHiding()},isThemeDependent:!0,option:"loadingIndicator",isOptionChange:!0}),t._eventsMap.onLoadingIndicatorReady={name:"loadingIndicatorReady"};var a=t._drawn;t._drawn=function(){a.apply(this,arguments),this._dataIsReady()&&this._fulfillLoadingIndicatorHiding()}}}}

