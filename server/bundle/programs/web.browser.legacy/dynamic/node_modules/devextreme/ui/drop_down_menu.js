function module(t,e,i){"use strict";var o=t("../core/renderer"),n=t("../core/utils/window").getWindow(),s=t("../core/devices"),p=t("../core/component_registrator"),a=t("../core/utils/extend").extend,u=t("./widget/ui.widget"),r=t("./button"),c=t("./popover"),l=t("../data_helper"),h=t("./list"),d=t("./themes"),_=t("./widget/child_default_template"),m="dx-dropdownmenu",b="dx-dropdownmenu-popup",f="dx-dropdownmenu-popup-wrapper",g="dx-dropdownmenu-list",v="dx-dropdownmenu-button",k={popupWidth:"width",popupHeight:"height",popupMaxHeight:"maxHeight",popupAutoResizeEnabled:"autoResizeEnabled"},C={buttonIcon:"icon",buttonText:"text",buttonWidth:"width",buttonHeight:"height",buttonTemplate:"template"},x=u.inherit({_supportedKeys:function(){var t={};return this.option("opened")&&this._list.option("focusedElement")||(t=this._button._supportedKeys()),a(this.callBase(),t,{tab:function(){this._popup&&this._popup.hide()}})},_getDefaultOptions:function(){return a(this.callBase(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",buttonText:"",buttonIcon:"overflow",buttonWidth:void 0,buttonHeight:void 0,buttonTemplate:"content",onButtonClick:null,usePopover:!1,popupWidth:"auto",popupHeight:"auto",activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,deferRendering:!1,popupPosition:{my:"top center",at:"bottom center",collision:"fit flip",offset:{v:1}},popupAnimation:void 0,onItemRendered:null,menuWidget:h,popupMaxHeight:void 0,closeOnClick:!0,useInkRipple:!1,container:void 0,popupAutoResizeEnabled:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{usePopover:!0}},{device:{platform:"generic"},options:{popupPosition:{offset:{v:4}}}},{device:function(){return"desktop"===s.real().deviceType&&!s.isSimulator()},options:{focusStateEnabled:!0}},{device:{platform:"android"},options:{popupPosition:{my:"top "+(this.option("rtlEnabled")?"left":"right"),at:"top "+(this.option("rtlEnabled")?"left":"right"),collision:"flipfit"},popupAnimation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}},{device:function(){return d.isMaterial()},options:{useInkRipple:!0}}])},_initOptions:function(t){"android"===s.current().platform&&(t.popupPosition||(t.popupPosition={at:(t.usePopover?"bottom ":"top ")+(t.rtlEnabled?"left":"right")})),this.callBase(t)},_dataSourceOptions:function(){return{paginate:!1}},_init:function(){this.callBase(),this.$element().addClass("dx-dropdownmenu"),this._initDataSource(),this._initItemClickAction(),this._initButtonClickAction()},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initButtonClickAction:function(){this._buttonClickAction=this._createActionByOption("onButtonClick")},_initTemplates:function(){this.callBase(),this._defaultTemplates.content=new _("content",this)},_initMarkup:function(){this._renderButton(),this.callBase()},_render:function(){this.callBase(),this.setAria({role:"menubar",haspopup:!0,expanded:this.option("opened")})},_renderContentImpl:function(){this.option("opened")&&this._renderPopup()},_clean:function(){this._cleanFocusState(),this._popup&&(this._popup.$element().remove(),delete this._$popup)},_renderButton:function(){var t=this.$element().addClass("dx-dropdownmenu-button"),e=this._buttonOptions();this._button=this._createComponent(t,r,e)},_toggleActiveState:function(t,e,i){this._button._toggleActiveState(t,e,i)},_buttonOptions:function(){return{text:this.option("buttonText"),icon:this.option("buttonIcon"),width:this.option("buttonWidth"),height:this.option("buttonHeight"),useInkRipple:this.option("useInkRipple"),template:this.option("buttonTemplate"),focusStateEnabled:!1,onClick:function(t){this.option("opened",!this.option("opened")),this._buttonClickAction(t)}.bind(this)}},_toggleMenuVisibility:function(t){var e=void 0===t?!this._popup.option("visible"):t;t&&this._renderPopup(),this._popup.toggle(e),this.setAria("expanded",e)},_renderPopup:function(){if(!this._$popup){var t=this._$popup=o("<div>").appendTo(this.$element()),e=this._popupOptions();this._popup=this._createComponent(t,c,e)}},_popupOptions:function(){var t=!this.option("usePopover");return{onInitialized:function(e){e.component._wrapper().addClass("dx-dropdownmenu-popup-wrapper").toggleClass("dx-dropdownmenu-popup",t)},visible:this.option("opened"),deferRendering:!1,contentTemplate:function(t){this._renderList(t)}.bind(this),position:this.option("popupPosition"),animation:this.option("popupAnimation"),onOptionChanged:function(t){"visible"===t.name&&this.option("opened",t.value)}.bind(this),target:this.$element(),height:this.option("popupHeight"),width:this.option("popupWidth"),maxHeight:this.option("popupMaxHeight"),container:this.option("container"),autoResizeEnabled:this.option("popupAutoResizeEnabled")}},_renderList:function(t){var e=o(t),i=this._listOptions();e.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(e,this.option("menuWidget"),i),this._list._getAriaTarget=function(){return this.$element()}.bind(this),this._setListDataSource();var s=.5*o(n).height();e.height()>s&&e.height(s)},_listOptions:function(){return{_keyboardProcessor:this._listProcessor,pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:function(t){this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(t)}.bind(this),tabIndex:-1,focusStateEnabled:this.option("focusStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}}},_setListDataSource:function(){this._list&&this._list.option("dataSource",this._dataSource||this.option("items")),delete this._deferRendering},_attachKeyboardEvents:function(){this.callBase.apply(this,arguments),this._listProcessor=this._keyboardProcessor&&this._keyboardProcessor.attachChildProcessor(),this._list&&this._list.option("_keyboardProcessor",this._listProcessor)},_cleanFocusState:function(){this.callBase.apply(this,arguments),delete this._listProcessor},_toggleVisibility:function(t){this.callBase(t),this._button.option("visible",t)},_optionChanged:function(t){var e=t.name,i=t.value;switch(e){case"items":case"dataSource":this.option("deferRendering")&&!this.option("opened")?this._deferRendering=!0:(this._refreshDataSource(),this._setListDataSource());break;case"itemTemplate":this._list&&this._list.option(e,this._getTemplate(i));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"buttonIcon":case"buttonText":case"buttonWidth":case"buttonHeight":case"buttonTemplate":this._button.option(C[e],i),this._renderPopup();break;case"popupWidth":case"popupHeight":case"popupMaxHeight":case"popupAutoResizeEnabled":this._popup.option(k[e],i);break;case"usePopover":case"menuWidget":case"useInkRipple":this._invalidate();break;case"focusStateEnabled":case"activeStateEnabled":this._list&&this._list.option(e,i),this.callBase(t);break;case"onItemRendered":this._list&&this._list.option(e,i);break;case"opened":this._deferRendering&&(this._refreshDataSource(),this._setListDataSource()),this._toggleMenuVisibility(i);break;case"deferRendering":case"popupPosition":case"closeOnClick":break;case"container":this._popup&&this._popup.option(t.name,t.value);break;default:this.callBase(t)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)}}).include(l);p("dxDropDownMenu",x),i.exports=x}

