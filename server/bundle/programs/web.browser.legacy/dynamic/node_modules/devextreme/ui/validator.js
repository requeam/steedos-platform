function module(i,t,a){"use strict";var e=i("../core/element_data"),o=i("../core/utils/callbacks"),n=i("./widget/ui.errors"),s=i("../core/dom_component"),l=i("../core/utils/extend").extend,r=i("../core/utils/iterator").map,d=i("./validation/validation_mixin"),u=i("./validation_engine"),p=i("./validation/default_adapter"),c=i("../core/component_registrator"),h="dx-validator",v=s.inherit({_getDefaultOptions:function(){return l(this.callBase(),{validationRules:[]})},_init:function(){this.callBase(),this._initGroupRegistration(),this.focused=o(),this._initAdapter()},_initGroupRegistration:function(){var i=this._findGroup();this._groupWasInit||this.on("disposing",(function(i){u.removeRegisteredValidator(i.component._validationGroup,i.component)})),this._groupWasInit&&this._validationGroup===i||(u.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=i,u.registerValidatorInGroup(i,this))},_setOptionsByReference:function(){this.callBase(),l(this._optionsByReference,{validationGroup:!0})},_initAdapter:function(){var i=this,t=i.$element()[0],a=e.data(t,"dx-validation-target"),o=i.option("adapter");if(!o){if(a)return(o=new p(a,this)).validationRequestsCallbacks.add((function(t){i.validate(t)})),void this.option("adapter",o);throw n.Error("E0120")}var s=o.validationRequestsCallbacks;s&&(Array.isArray(s)?s.push((function(t){i.validate(t)})):(n.log("W0014","validationRequestsCallbacks","jQuery.Callbacks","17.2","Use the array instead"),s.add((function(t){i.validate(t)}))))},_initMarkup:function(){this.$element().addClass("dx-validator"),this.callBase()},_visibilityChanged:function(i){i&&this._initGroupRegistration()},_optionChanged:function(i){switch(i.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;default:this.callBase(i)}},_getValidationRules:function(){return this._validationRules||(this._validationRules=r(this.option("validationRules"),function(i){return l({},i,{validator:this})}.bind(this))),this._validationRules},_resetValidationRules:function(){delete this._validationRules},validate:function(i){var t,a=this,e=this.option("adapter"),o=this.option("name"),n=e.bypass&&e.bypass(),s=i&&void 0!==i.value?i.value:e.getValue(),l=e.getCurrentValidationError&&e.getCurrentValidationError(),r=this._getValidationRules();return n?t={isValid:!0}:l&&l.editorSpecific?(l.validator=this,t={isValid:!1,brokenRule:l}):t=u.validate(s,r,o),this._applyValidationResult(t,e),t},reset:function(){var i=this,t=this.option("adapter"),a={isValid:!0,brokenRule:null};t.reset(),this._resetValidationRules(),this._applyValidationResult(a,t)},_applyValidationResult:function(i,t){var a=this._createActionByOption("onValidated");i.validator=this,t.applyValidationResults&&t.applyValidationResults(i),this.option({isValid:i.isValid}),a(i)},focus:function(){var i=this.option("adapter");i&&i.focus&&i.focus()}}).include(d);c("dxValidator",v),a.exports=v,a.exports.default=a.exports}

