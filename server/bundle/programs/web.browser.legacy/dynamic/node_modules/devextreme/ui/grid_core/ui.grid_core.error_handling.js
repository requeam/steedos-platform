function module(e,r,o){"use strict";var t,n=f(e("../../core/renderer")),a,i=f(e("../../events/core/events_engine")),d,s=f(e("../../events/click")),l=e("../../core/utils/iterator"),c,u=f(e("./ui.grid_core.modules"));function f(e){return e&&e.__esModule?e:{default:e}}var w="dx-error-row",h="dx-error-message",g="dx-closebutton",m="action",v=u.default.ViewController.inherit({init:function(){var e=this;this._columnHeadersView=this.getView("columnHeadersView"),this._rowsView=this.getView("rowsView")},_createErrorRow:function(e,r){var o,t,a=this,d=this._renderErrorMessage(e);return r?(o=(0,n.default)("<tr>").addClass("dx-error-row"),t=(0,n.default)("<div>").addClass("dx-closebutton").addClass(a.addWidgetPrefix("action")),i.default.on(t,s.default.name,a.createAction((function(e){var o,t=e.event,i=(0,n.default)(t.currentTarget).closest(".dx-error-row").index();t.stopPropagation(),(0,l.each)(r,(function(e,r){o=(0,n.default)(r).children("tbody").children("tr").eq(i),a.removeErrorRow(o)})),a.component._fireContentReadyAction()}))),(0,n.default)("<td>").attr({colSpan:a.getController("columns").getVisibleColumns().length,role:"presentation"}).prepend(t).append(d).appendTo(o),o):d},_renderErrorMessage:function(e){var r=e.url?e.message.replace(e.url,""):e.message||e,o=(0,n.default)("<div>").addClass("dx-error-message").text(r);return e.url&&(0,n.default)("<a>").attr("href",e.url).text(e.url).appendTo(o),o},renderErrorRow:function(e,r,o){var t,a,i,d,s,c,u=this;return o?(o.find(".dx-error-message").remove(),a=u._createErrorRow(e),o.prepend(a),a):(s=r>=0||!u._columnHeadersView.isVisible()?u._rowsView:u._columnHeadersView,c=o||s.getTableElements(),(0,l.each)(c,(function(o,l){if(a=u._createErrorRow(e,c),i=i||a,r>=0)t=s._getRowElements((0,n.default)(l)).eq(r),u.removeErrorRow(t.next()),a.insertAfter(t);else{var f=(0,n.default)(l).children("tbody");d=f.children("tr"),u._columnHeadersView.isVisible()?(u.removeErrorRow(d.last()),(0,n.default)(l).append(a)):(u.removeErrorRow(d.first()),f.first().prepend(a))}})),i)},removeErrorRow:function(e){if(!e){var r=this._columnHeadersView&&this._columnHeadersView.element();if(!(e=r&&r.find(".dx-error-row"))||!e.length){var o=this._rowsView.element();e=o&&o.find(".dx-error-row")}}e&&e.hasClass("dx-error-row")&&e.remove()},optionChanged:function(e){var r=this;switch(e.name){case"errorRowEnabled":e.handled=!0;break;default:this.callBase(e)}}});o.exports={defaultOptions:function(){return{errorRowEnabled:!0}},controllers:{errorHandling:v},extenders:{controllers:{data:{init:function(){var e=this,r=e.getController("errorHandling");e.callBase(),e.dataErrorOccurred.add((function(o,t){e.option("errorRowEnabled")&&r.renderErrorRow(o,void 0,t)})),e.changed.add((function(r){if(!r||"loadError"!==r.changeType){var o=e.getController("errorHandling"),t=e.getController("editing");t&&!t.hasChanges()&&o&&o.removeErrorRow()}}))}}}}}}

