function module(t,e,n){"use strict";var i=t("../../../core/utils/common").noop,r=t("../../../core/utils/date"),s=t("../../../core/utils/iterator").each,o=t("../../../core/utils/array"),a,c=t("./ui.scheduler.appointments.strategy.base").inherit({ctor:function(t){this.instance=t},getAppointmentMinSize:i,getDeltaTime:i,keepAppointmentSettings:function(){return!0},getAppointmentGeometry:function(t){return t},createTaskPositionMap:function(t){if(t.length){var e=this.instance.fire("getAgendaVerticalStepHeight"),n=this.instance.fire("groupAppointmentsByResources",t),i=[];s(n,function(t,e){var n=[],r=[];s(e,function(t,e){var i=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(e,t),s=null;i.indexes.length||(s={parts:[]},s=this.instance.getAppointmentsInstance()._processLongAppointment(e),n=n.concat(s.parts)),n=n.concat(i.parts),r=r.concat(i.indexes)}.bind(this)),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(r,e),this.instance.getAppointmentsInstance()._combineAppointments(e,n),i=i.concat(e)}.bind(this)),Array.prototype.splice.apply(t,[0,t.length].concat(i))}var r=[],o=0;return t.forEach(function(t,i){r.push([{height:e,width:"100%",sortedIndex:o++,groupIndex:this._calculateGroupIndex(i,n)}])}.bind(this)),r},_calculateGroupIndex:function(t,e){var n,i=0;for(var r in e){var s=e[r].length;if(t>=i&&t<i+s){n=Number(r);break}i+=s}return n},_getDeltaWidth:i,_getAppointmentMaxWidth:function(){return this._defaultWidth},_needVerifyItemSize:function(){return!1},_isRtl:function(){return this.instance.option("rtlEnabled")},_getAppointmentParts:i,_reduceMultiWeekAppointment:i,calculateAppointmentHeight:function(){return 0},calculateAppointmentWidth:function(){return 0},isAppointmentGreaterThan:i,isAllDay:function(){return!1},_sortCondition:i,_rowCondition:i,_columnCondition:i,_findIndexByKey:i,_getMaxNeighborAppointmentCount:i,_markAppointmentAsVirtual:i,getCompactAppointmentGroupMaxWidth:i,getDefaultCellWidth:function(){return this._defaultWidth},getCompactAppointmentDefaultSize:i,getCompactAppointmentDefaultOffset:i,calculateRows:function(t,e,n,i){this._rows=[];var a={indexes:[],parts:[]},c=this.instance.fire("groupAppointmentsByResources",t);return n=r.trimTime(new Date(n)),s(c,function(t,r){var c=[];if(!r.length)return this._rows.push([]),!0;s(r,function(t,e){var n=this.instance.fire("getField","startDate",e),r=this.instance.fire("getField","endDate",e);this.instance.fire("fixWrongEndDate",e,n,r),i&&delete e.settings;var s=this.instance.getAppointmentsInstance()._processRecurrenceAppointment(e,t,!1);a.parts=a.parts.concat(s.parts),a.indexes=a.indexes.concat(s.indexes)}.bind(this)),this.instance.getAppointmentsInstance()._reduceRecurrenceAppointments(a.indexes,r),o.merge(r,a.parts);for(var p=r.length,u=0;u<e;u++){var h=new Date(n);h.setMilliseconds(h.getMilliseconds()+864e5*u),void 0===c[u]&&(c[u]=0);for(var d=0;d<p;d++){var l=r[d].settings||r[d],g=this.instance.fire("appointmentTakesSeveralDays",r[d]),f=this.instance.fire("getField","recurrenceRule",r[d]);(this.instance.fire("dayHasAppointment",h,l,!0)||!f&&g&&this.instance.fire("dayHasAppointment",h,r[d],!0))&&(c[u]+=1)}}this._rows.push(c)}.bind(this)),this._rows},_iterateRow:function(t,e,n){for(var i=0;i<t.length;i++)if(e.counter=e.counter+t[i],e.counter>=n){e.indexInRow=i;break}},getDateByIndex:function(t,e,n){var i={counter:0,indexInRow:0};t++;for(var r=0;r<e.length&&(this._iterateRow(e[r],i,t),!i.indexInRow);r++);return new Date(new Date(n).setDate(n.getDate()+i.indexInRow))},getAppointmentDataCalculator:function(){return function(t,e){var n=t.index(),i=this.instance.getStartViewDate(),r=this.getDateByIndex(n,this._rows,i),s=new Date(e);return{startDate:new Date(r.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()))}}.bind(this)}});n.exports=c}

