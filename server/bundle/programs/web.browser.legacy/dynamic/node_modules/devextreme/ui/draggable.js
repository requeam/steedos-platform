function module(t,e,i){"use strict";var n=t("../core/renderer"),a=t("../core/utils/window").getWindow(),o=t("../events/core/events_engine"),s=t("../core/utils/string"),r=t("../core/component_registrator"),d=t("../animation/translator"),c=t("../core/utils/inflector").dasherize,l=t("../core/utils/extend").extend,h=t("../core/dom_component"),f=t("../events/utils"),g=t("../events/pointer"),_=t("../events/drag"),u=t("../animation/position"),m=t("../core/utils/type").isFunction,p=t("../core/utils/common").noop,v="dxDraggable",b=f.addNamespace(_.start,v),D=f.addNamespace(_.move,v),A=f.addNamespace(_.end,v),O=f.addNamespace(g.down,v),H=c(v),B=H+"-dragging",w=h.inherit({_getDefaultOptions:function(){return l(this.callBase(),{onDragStart:p,onDrag:p,onDragEnd:p,immediate:!0,direction:"both",area:a,boundOffset:0,allowMoveByClick:!1})},_init:function(){this.callBase(),this._attachEventHandlers()},_attachEventHandlers:function(){if(!this.option("disabled")){var t=this.$element().css("position","absolute"),e={},i=this.option("allowMoveByClick");e[b]=this._dragStartHandler.bind(this),e[D]=this._dragHandler.bind(this),e[A]=this._dragEndHandler.bind(this),i&&(e[O]=this._pointerDownHandler.bind(this),t=this._getArea()),o.on(t,e,{direction:this.option("direction"),immediate:this.option("immediate")})}},_detachEventHandlers:function(){o.off(this.$element(),"."+v),o.off(this._getArea(),"."+v)},_move:function(t){d.move(this.$element(),t)},_pointerDownHandler:function(t){if(!f.needSkipEvent(t)){var e=this._getAreaOffset(n(t.currentTarget)),i=this.option("direction"),a={};"horizontal"!==i&&"both"!==i||(a.left=t.pageX-this.$element().width()/2-e.left),"vertical"!==i&&"both"!==i||(a.top=t.pageY-this.$element().height()/2-e.top),this._move(a),this._getAction("onDrag")({event:t})}},_dragStartHandler:function(t){var e=this.$element();if(e.is(".dx-state-disabled, .dx-state-disabled *"))t.cancel=!0;else{var i=this._getArea(),n=this._getAreaOffset(i),a=this._getBoundOffset(),o=i.outerWidth(),s=i.outerHeight(),r=e.width(),c=e.height();this._toggleDraggingClass(!0);var l=e.offset().left-n.left,h=e.offset().top-n.top;this._startPosition=d.locate(e),t.maxLeftOffset=l-a.left,t.maxRightOffset=o-l-r-a.right,t.maxTopOffset=h-a.top,t.maxBottomOffset=s-h-c-a.bottom,this._getAction("onDragStart")({event:t})}},_getAreaOffset:function(t){var e=t&&u.offset(t);return e||{left:0,top:0}},_toggleDraggingClass:function(t){this.$element().toggleClass(B,t)},_getBoundOffset:function(){var t=this.option("boundOffset");return m(t)&&(t=t.call(this)),s.quadToObject(t)},_getArea:function(){var t=this.option("area");return m(t)&&(t=t.call(this)),n(t)},_dragHandler:function(t){var e=t.offset,i=this._startPosition;this._move({left:i.left+e.x,top:i.top+e.y}),this._getAction("onDrag")({event:t})},_dragEndHandler:function(t){this._toggleDraggingClass(!1),this._getAction("onDragEnd")({event:t})},_getAction:function(t){return this["_"+t+"Action"]||this._createActionByOption(t)},_render:function(){this.callBase(),this.$element().addClass(H)},_optionChanged:function(t){var e=t.name;switch(e){case"onDragStart":case"onDrag":case"onDragEnd":this["_"+e+"Action"]=this._createActionByOption(e);break;case"allowMoveByClick":case"direction":case"disabled":this._detachEventHandlers(),this._attachEventHandlers();break;case"boundOffset":case"area":break;default:this.callBase(t)}},_dispose:function(){this.callBase(),this._detachEventHandlers()}});r(v,w),i.exports=w}

