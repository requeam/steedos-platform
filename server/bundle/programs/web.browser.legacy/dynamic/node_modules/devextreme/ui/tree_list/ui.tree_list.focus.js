function module(e){"use strict";var t,r=s(e("./ui.tree_list.core")),n=e("../../core/utils/extend"),o=e("../../core/utils/deferred"),i,a=s(e("../grid_core/ui.grid_core.focus"));function s(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=-1;return e.forEach((function(e,n){t(e)&&(r=n)})),r}r.default.registerModule("focus",(0,n.extend)(!0,{},a.default,{extenders:{controllers:{data:{changeRowExpand:function(e){return this.option("focusedRowEnabled")&&this.isRowExpanded(e)&&this._isFocusedRowInside(e)&&this.option("focusedRowKey",e),this.callBase.apply(this,arguments)},_isFocusedRowInside:function(e){for(var t=this.option("focusedRowKey"),r=this.getRowIndexByKey(t),n=r>=0&&this.getVisibleRows()[r],o=n&&n.node.parent;o;){if(o.key===e)return!0;o=o.parent}return!1},getParentKey:function(e){var t=this,r=this._dataSource,n=this.getNodeByKey(e),i=new o.Deferred;return n?i.resolve(n.parent?n.parent.key:void 0):r.load({filter:[r.getKeyExpr(),"=",e]}).done((function(e){var t=e[0];t?i.resolve(r.parentKeyOf(t)):i.reject()})).fail(i.reject),i.promise()},expandAscendants:function(e){var t=this,r=t._dataSource,n=new o.Deferred;return t.getParentKey(e).done((function(e){r&&void 0!==e&&e!==t.option("rootValue")?(r._isNodesInitializing=!0,t.expandRow(e),r._isNodesInitializing=!1,t.expandAscendants(e).done(n.resolve).fail(n.reject)):n.resolve()})).fail(n.reject),n.promise()},getPageIndexByKey:function(e){var t=this,r=t._dataSource,n=new o.Deferred;return t.expandAscendants(e).done((function(){r.load({filter:t.getCombinedFilter(),sort:t.getController("columns").getSortDataSourceParameters(!r.remoteOperations().sorting),parentIds:[]}).done((function(r){var o=d(r,(function(r){return t.keyOf(r.data)===e})),i=t.pageIndex();o>=0&&(i=Math.floor(o/t.pageSize())),n.resolve(i)})).fail(n.reject)})).fail(n.reject),n.promise()}}}}}))}

