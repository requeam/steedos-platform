function module(t,i,e){"use strict";var s=t("../../../core/utils/iterator").each,a=t("../../../core/utils/extend").extend,h=t("../../../core/utils/common").noop,o=t("./label"),r=t("./symbol_point"),n=a,l=t("../../../core/utils/type").isDefined,u=Math,m=u.abs,g=u.min,c=u.max,b=u.round,p=20,_=20;e.exports=n({},r,{deleteLabel:function(){var t=this;this._topLabel.dispose(),this._topLabel=null,this._bottomLabel.dispose(),this._bottomLabel=null},hideMarker:function(t){var i=this.graphic,e=i&&i[t+"Marker"],s=this["_"+t+"Label"];e&&"hidden"!==e.attr("visibility")&&e.attr({visibility:"hidden"}),s.draw(!1)},setInvisibility:function(){this.hideMarker("top"),this.hideMarker("bottom")},clearVisibility:function(){var t=this,i=this.graphic,e=i&&i.topMarker,s=i&&i.bottomMarker;e&&e.attr("visibility")&&e.attr({visibility:null}),s&&s.attr("visibility")&&s.attr({visibility:null})},clearMarker:function(){var t=this,i=this.graphic,e=i&&i.topMarker,s=i&&i.bottomMarker,a=this._emptySettings;e&&e.attr(a),s&&s.attr(a)},_getLabelPosition:function(t){var i,e="inside"===this._options.label.position;return i=this._options.rotated?"top"===t^e?"right":"left":"top"===t^e?"top":"bottom"},_getLabelMinFormatObject:function(){var t=this;return{index:0,argument:this.initialArgument,value:this.initialMinValue,seriesName:this.series.name,originalValue:this.originalMinValue,originalArgument:this.originalArgument,point:this}},_updateLabelData:function(){var t=this._getLabelFormatObject();t.index=1,this._topLabel.setData(t),this._bottomLabel.setData(this._getLabelMinFormatObject())},_updateLabelOptions:function(){var t=this,i=this._options.label;(!this._topLabel||!this._bottomLabel)&&this._createLabel(),this._topLabel.setOptions(i),this._bottomLabel.setOptions(i)},_createLabel:function(){var t={renderer:this.series._renderer,labelsGroup:this.series._labelsGroup,point:this};this._topLabel=new o.Label(t),this._bottomLabel=new o.Label(t)},_getGraphicBBox:function(t){var i,e=this._options,s=this._getImage(e.image),a="top"===t?this._checkImage(s.top):this._checkImage(s.bottom),h=this._getPositionFromLocation(t);return i=e.visible?a?this._getImageBBox(h.x,h.y):this._getSymbolBBox(h.x,h.y,e.styles.normal.r):{x:h.x,y:h.y,width:0,height:0}},_getPositionFromLocation:function(t){var i,e,s="top"===t;return this._options.rotated?(i=s?c(this.x,this.minX):g(this.x,this.minX),e=this.y):(i=this.x,e=s?g(this.y,this.minY):c(this.y,this.minY)),{x:i,y:e}},_checkOverlay:function(t,i,e){return t<i+e},_getOverlayCorrections:function(t,i){var e=this._options.rotated,s=e?"x":"y",a=e?"width":"height",h=this._getValTranslator().getCanvasVisibleArea(),o=h.min,r=h.max,n=b((t[s]+t[a]-i[s])/2),l=t[s]-n,u=i[s]+n;return l<o?(l+=n=o-t[s],u+=n):u+i[a]>r&&(l+=n=-(i[s]+i[a]-r),u+=n),{coord1:l,coord2:u}},_checkLabelsOverlay:function(t){var i=this,e=this._topLabel.getBoundingRect(),s=this._bottomLabel.getBoundingRect(),a={};this._options.rotated?"top"===t?this._checkOverlay(e.x,s.x,s.width)&&(a=this._getOverlayCorrections(s,e),this._topLabel.shift(a.coord2,e.y),this._bottomLabel.shift(a.coord1,s.y)):this._checkOverlay(s.x,e.x,e.width)&&(a=this._getOverlayCorrections(e,s),this._topLabel.shift(a.coord1,e.y),this._bottomLabel.shift(a.coord2,s.y)):"top"===t?this._checkOverlay(s.y,e.y,e.height)&&(a=this._getOverlayCorrections(e,s),this._topLabel.shift(e.x,a.coord1),this._bottomLabel.shift(s.x,a.coord2)):this._checkOverlay(e.y,s.y,s.height)&&(a=this._getOverlayCorrections(s,e),this._topLabel.shift(e.x,a.coord2),this._bottomLabel.shift(s.x,a.coord1))},_drawLabel:function(){var t=this,i=[],e=this._options.rotated?this.x>=this.minX:this.y<this.minY,a=this._getCustomLabelVisibility(),h=this._topLabel,o=this._bottomLabel;h.pointPosition=e?"top":"bottom",o.pointPosition=e?"bottom":"top",(this.series.getLabelVisibility()||a)&&this.hasValue()&&!1!==a?(!1!==this.visibleTopMarker&&i.push(h),!1!==this.visibleBottomMarker&&i.push(o),s(i,(function(t,i){i.draw(!0)})),this._checkLabelsOverlay(this._topLabel.pointPosition)):(h.draw(!1),o.draw(!1))},_getImage:function(t){var i={};return l(t)&&("string"==typeof t?i.top=i.bottom=t:(i.top={url:"string"==typeof t.url?t.url:t.url&&t.url.rangeMaxPoint,width:"number"==typeof t.width?t.width:t.width&&t.width.rangeMaxPoint,height:"number"==typeof t.height?t.height:t.height&&t.height.rangeMaxPoint},i.bottom={url:"string"==typeof t.url?t.url:t.url&&t.url.rangeMinPoint,width:"number"==typeof t.width?t.width:t.width&&t.width.rangeMinPoint,height:"number"==typeof t.height?t.height:t.height&&t.height.rangeMinPoint})),i},_checkSymbol:function(t,i){var e=this,s=t.symbol,a=i.symbol,h="circle"===s&&"circle"!==a||"circle"!==s&&"circle"===a,o=this._getImage(t.image),r=this._getImage(i.image),n=this._checkImage(o.top)!==this._checkImage(r.top),l=this._checkImage(o.bottom)!==this._checkImage(r.bottom);return h||n||l},_getSettingsForTwoMarkers:function(t){var i=this,e=this._options,s={},a=e.rotated?g(this.x,this.minX):this.x,h=e.rotated?this.y:g(this.y,this.minY),o=t.r,r=this._populatePointShape(e.symbol,o);return s.top=n({translateX:a+this.width,translateY:h,r:o},t),s.bottom=n({translateX:a,translateY:h+this.height,r:o},t),r&&(s.top.points=s.bottom.points=r),s},_hasGraphic:function(){return this.graphic&&this.graphic.topMarker&&this.graphic.bottomMarker},_drawOneMarker:function(t,i,e,s){var a=this,h=this.graphic;h[i]?this._updateOneMarker(i,s):h[i]=this._createMarker(t,h,e,s)},_drawMarker:function(t,i,e,s,a){var h=this,o=this._getSettingsForTwoMarkers(a||this._getStyle()),r=this._getImage(this._options.image);this._checkImage(r.top)&&(o.top=this._getImageSettings(o.top,r.top)),this._checkImage(r.bottom)&&(o.bottom=this._getImageSettings(o.bottom,r.bottom)),this.graphic=this.graphic||t.g().append(i),this.visibleTopMarker&&this._drawOneMarker(t,"topMarker",r.top,o.top),this.visibleBottomMarker&&this._drawOneMarker(t,"bottomMarker",r.bottom,o.bottom)},_getSettingsForTracker:function(t){var i=this,e=this._options.rotated;return{translateX:e?g(this.x,this.minX)-t:this.x-t,translateY:e?this.y-t:g(this.y,this.minY)-t,width:this.width+2*t,height:this.height+2*t}},isInVisibleArea:function(){var t,i,e,s,a,h=this,o=this._options.rotated,r=o?this.y:this.x,n=o?c(this.minX,this.x):c(this.minY,this.y),l=o?g(this.minX,this.x):g(this.minY,this.y),u=!0,m=!0,b=!0;return s=this._getArgTranslator().getCanvasVisibleArea(),a=this._getValTranslator().getCanvasVisibleArea(),t=s.max<r||s.min>r,i=a.min>l&&a.min>n||a.max<l&&a.max<n,t||i?u=m=b=!1:(u=a.min<=l&&a.max>l,m=a.min<n&&a.max>=n,o&&(e=u,u=m,m=e)),this.visibleTopMarker=u,this.visibleBottomMarker=m,b},getTooltipParams:function(){var t,i,e=this,s=this._options.rotated,a=s?g(this.x,this.minX):g(this.y,this.minY),h=s?"width":"height",o=this._getVisibleArea(),r=s?o.minX:o.minY,n=s?o.maxX:o.maxY,l=c(r,a),u=g(n,a+this[h]);return s?(i=this.y,t=l+(u-l)/2):(t=this.x,i=l+(u-l)/2),{x:t,y:i,offset:0}},_translate:function(){var t=this,i=this._options.rotated;r._translate.call(this),this.height=i?0:m(this.minY-this.y),this.width=i?m(this.x-this.minX):0},hasCoords:function(){return r.hasCoords.call(this)&&!(null===this.minX||null===this.minY)},_updateData:function(t){var i=this;r._updateData.call(this,t),this.minValue=this.initialMinValue=this.originalMinValue=t.minValue},_getImageSettings:function(t,i){return{href:i.url||i.toString(),width:i.width||20,height:i.height||20,translateX:t.translateX,translateY:t.translateY}},getCrosshairData:function(t,i){var e=this,s=this._options.rotated,a=this.minX,h=this.minY,o=this.vx,r=this.vy,n=this.value,l=this.minValue,u=this.argument,g={axis:this.series.axis,x:o,y:r,yValue:n,xValue:u};return s?(g.yValue=u,m(o-t)<m(a-t)?g.xValue=n:(g.x=a,g.xValue=l)):m(r-i)>=m(h-i)&&(g.y=h,g.yValue=l),g},_updateOneMarker:function(t,i){this.graphic&&this.graphic[t]&&this.graphic[t].attr(i)},_updateMarker:function(t,i){this._drawMarker(void 0,void 0,!1,!1,i)},_getFormatObject:function(t){var i=this,e=this.initialMinValue,s=this.initialValue,a=this.initialArgument,h=t.formatValue(e),o=t.formatValue(s);return{argument:a,argumentText:t.formatValue(a,"argument"),valueText:h+" - "+o,rangeValue1Text:h,rangeValue2Text:o,rangeValue1:e,rangeValue2:s,seriesName:this.series.name,point:this,originalMinValue:this.originalMinValue,originalValue:this.originalValue,originalArgument:this.originalArgument}},getLabel:function(){return[this._topLabel,this._bottomLabel]},getLabels:function(){return[this._topLabel,this._bottomLabel]},getBoundingRect:h,coordsIn:function(t,i){var e=this._storeTrackerR(),s=t>=this.x-e&&t<=this.x+e,a=i>=this.y-e&&i<=this.y+e;return this._options.rotated?a&&(s||t>=this.minX-e&&t<=this.minX+e):s&&(a||i>=this.minY-e&&i<=this.minY+e)},getMaxValue:function(){return"discrete"!==this.series.valueAxisType&&this.minValue>this.value?this.minValue:this.value},getMinValue:function(){return"discrete"!==this.series.valueAxisType?this.minValue<this.value?this.minValue:this.value:this.minValue}})}

