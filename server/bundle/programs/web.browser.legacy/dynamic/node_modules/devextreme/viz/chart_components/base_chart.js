function module(e,t){"use strict";var i=e("../../core/utils/common"),n=i.noop,s=e("../../events/core/events_engine"),r=e("../../core/utils/type"),a=e("../../core/utils/iterator"),o=e("../../core/utils/extend").extend,c=e("../../core/utils/array").inArray,l=e("../../events/utils"),h=e("../core/base_widget"),_=e("../../core/utils/data"),u=e("../components/legend"),d=e("../components/data_validator"),p=e("../series/base_series"),g=e("../components/chart_theme_manager"),f=e("./layout_manager"),S=e("./tracker"),v=e("./header_block"),m="_reinit",R="_updateDataSource",E="_dataInit",A="_forceRender",x="_resize",O=["_reinit","_updateDataSource","_dataInit","_forceRender","_resize"],b=e("../core/utils"),C=b.map,T=a.each,k=a.reverseEach,I=o,y=Array.isArray,L=r.isDefined,D=b.setCanvasValues,B=.3,P=["series","commonSeriesSettings","dataPrepareSettings","seriesSelectionMode","pointSelectionMode","synchronizeMultiAxes","resolveLabelsOverlapping"],G=["equalBarWidth","minBubbleSize","maxBubbleSize","barWidth","barGroupPadding","barGroupWidth","negativesAsZeroes","negativesAsZeros"],M=["adaptiveLayout","crosshair","resolveLabelOverlapping","adjustOnZoom","zoomingMode","scrollingMode"];function N(e,t){var i=t.end-t.start,n=0;for(e.forEach((function(e){n+=e.getBoundingRect().width}));i<n;)n-=F(e)}function F(e){var t,i;return(t=e.reduce((function(e,t,i){if(!t)return e;var n=t.value();return n<e.value?{value:n,rollingStock:t,index:i}:e}),{rollingStock:void 0,value:1/0,index:void 0})).rollingStock.getLabels()[0].draw(!1),i=t.rollingStock.getBoundingRect().width,e[t.index]=null,i}function w(e){var t,i,n,s,r=!1;for(t=0,n=e.length-1;t<n;t++){for(i=t+1,s=e.length;i<s;i++)if(t!==i&&z(e[t],e[i],!0)){r=!0;break}if(r)break}return r}function H(e,t,i,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return 0},r=[],a={start:i?t.left:t.top,end:i?t.width-t.right:t.height-t.bottom},o=!1;if(e.forEach((function(e){e&&(o=o||e.series.isStackedSeries()||e.series.isFullStackedSeries(),e.getLabels().forEach((function(e){e.isVisible()&&r.push(new U(e,i,n))})))})),o)!i&&r.reverse();else{var c=r.slice();r.sort((function(e,t){return s(e,t)||e.getInitialPosition()-t.getInitialPosition()||c.indexOf(e)-c.indexOf(t)}))}w(r)&&(N(r,a),V(r),r.reverse(),X(r,a))}function z(e,t,i){if(e&&t){var n=e.getBoundingRect(),s=t.getBoundingRect(),r=!i||(n.oppositeStart<=s.oppositeStart&&n.oppositeEnd>s.oppositeStart||s.oppositeStart<=n.oppositeStart&&s.oppositeEnd>n.oppositeStart);return n.end>s.start&&r}}function V(e){var t,i,n;for(t=0;t<e.length-1;t++)z(i=n||e[t],e[t+1])?(i.toChain(e[t+1]),e[t+1]=null,n=i):n=e[t+1]||i}function X(e,t){var i,n,s,r,a,o;for(i=0;i<e.length;i++){if(j(s=e[i],t))for(a=s.getBoundingRect(),n=i+1;n<e.length;n++)if((r=e[n])&&(o=r.getBoundingRect()).end>a.start-(a.end-t.end)){r.toChain(s),e[i]=s=null;break}s&&s.setRollingStockInCanvas(t)}}function j(e,t){return e&&e.getBoundingRect().end>t.end}function U(e,t,i){var n=e.getBoundingRect(),s=n.x,r=n.y,a=n.x+n.width,o=n.y+n.height;return this.labels=[e],this.shiftFunction=i,this._bBox={start:t?s:r,width:t?n.width:n.height,end:t?a:o,oppositeStart:t?r:s,oppositeEnd:t?o:a},this._initialPosition=t?n.x:n.y,this}function Z(e){return{nameField:e+"Name",colorField:e+"Color",indexField:e+"Index"}}function W(e){var t=Z(e);return{getFormatObject:function(e){var i={};return i[t.indexField]=e.id,i[t.colorField]=e.states.normal.fill,i[t.nameField]=e.text,i},textField:t.nameField}}function q(e,t){return(e.x<=t.x&&t.x<=e.x+e.width||e.x>=t.x&&e.x<=t.x+t.width)&&(e.y<=t.y&&t.y<=e.y+e.height||e.y>=t.y&&e.y<=t.y+t.height)}U.prototype={toChain:function(e){var t=e.getBoundingRect();e.shift(t.start-this._bBox.end),this._changeBoxWidth(t.width),this.labels=this.labels.concat(e.labels)},getBoundingRect:function(){return this._bBox},shift:function(e){var t=this.shiftFunction;T(this.labels,(function(i,n){var s=n.getBoundingRect(),r=t(s,e);n.hideInsideLabel(r)||n.shift(r.x,r.y)})),this._bBox.end-=e,this._bBox.start-=e},setRollingStockInCanvas:function(e){this._bBox.end>e.end&&this.shift(this._bBox.end-e.end)},getLabels:function(){return this.labels},value:function(){return this.labels[0].getData().value},getInitialPosition:function(){return this._initialPosition},_changeBoxWidth:function(e){this._bBox.end+=e,this._bBox.width+=e}};var $={resolveLabelOverlappingInOneDirection:H};function J(e){e.forward=function(e){return e},e.backward=n}var K=h.inherit({_eventsMap:{onSeriesClick:{name:"seriesClick"},onPointClick:{name:"pointClick"},onArgumentAxisClick:{name:"argumentAxisClick"},onLegendClick:{name:"legendClick"},onSeriesSelectionChanged:{name:"seriesSelectionChanged"},onPointSelectionChanged:{name:"pointSelectionChanged"},onSeriesHoverChanged:{name:"seriesHoverChanged"},onPointHoverChanged:{name:"pointHoverChanged"},onDone:{name:"done"},onZoomStart:{name:"zoomStart"},onZoomEnd:{name:"zoomEnd"}},_rootClassPrefix:"dxc",_rootClass:"dxc-chart",_initialChanges:["REINIT"],_themeDependentChanges:["REFRESH_SERIES_REINIT"],_createThemeManager:function(){var e=this.option(),t=new g.ThemeManager(e,this._chartType);return t.setTheme(e.theme,e.rtlEnabled),t},_initCore:function(){var e=this;J(this._layout),this._canvasClipRect=this._renderer.clipRect(),this._createHtmlStructure(),this._headerBlock=new v.HeaderBlock,this._createLegend(),this._createTracker(),this._needHandleRenderComplete=!0,this.layoutManager=new f.LayoutManager,this._createScrollBar(),s.on(this._$element,"contextmenu",(function(e){(l.isTouchEvent(e)||l.isPointerEvent(e))&&e.preventDefault()})),s.on(this._$element,"MSHoldVisual",(function(e){e.preventDefault()}))},_getLayoutItems:n,_layoutManagerOptions:function(){return this._themeManager.getOptions("adaptiveLayout")},_reinit:function(){var e=this;D(this._canvas),this._reinitAxes(),this._skipRender=!0,this._updateDataSource(),this.series&&!this.needToPopulateSeries||this._dataSpecificInit(!1),this._skipRender=!1,this._correctAxes(),this._forceRender()},_correctAxes:n,_createHtmlStructure:function(){var e=this,t=this._renderer,i=t.root;this._backgroundRect=t.rect().attr({fill:"gray",opacity:1e-4}).append(i),this._panesBackgroundGroup=t.g().attr({class:"dxc-background"}).append(i),this._stripsGroup=t.g().attr({class:"dxc-strips-group"}).linkOn(i,"strips"),this._gridGroup=t.g().attr({class:"dxc-grids-group"}).linkOn(i,"grids"),this._axesGroup=t.g().attr({class:"dxc-axes-group"}).linkOn(i,"axes"),this._labelAxesGroup=t.g().attr({class:"dxc-strips-labels-group"}).linkOn(i,"strips-labels"),this._panesBorderGroup=t.g().attr({class:"dxc-border"}).linkOn(i,"border"),this._seriesGroup=t.g().attr({class:"dxc-series-group"}).linkOn(i,"series"),this._constantLinesGroup=t.g().attr({class:"dxc-constant-lines-group"}).linkOn(i,"constant-lines"),this._scaleBreaksGroup=t.g().attr({class:"dxc-scale-breaks"}).linkOn(i,"scale-breaks"),this._labelsGroup=t.g().attr({class:"dxc-labels-group"}).linkOn(i,"labels"),this._crosshairCursorGroup=t.g().attr({class:"dxc-crosshair-cursor"}).linkOn(i,"crosshair"),this._legendGroup=t.g().attr({class:"dxc-legend","clip-path":this._getCanvasClipRectID()}).linkOn(i,"legend"),this._scrollBarGroup=t.g().attr({class:"dxc-scroll-bar"}).linkOn(i,"scroll-bar")},_disposeObjectsInArray:function(e,t){T(this[e]||[],(function(e,i){t&&i?T(t,(function(e,t){i[t]&&i[t].dispose()})):i&&i.dispose()})),this[e]=null},_disposeCore:function(){var e=this,t=function(t){e[t]&&(e[t].dispose(),e[t]=null)},i=function(t){e[t].linkOff()},n=this._disposeObjectsInArray;e._renderer.stopAllAnimations(),n.call(e,"series"),t("_headerBlock"),t("_tracker"),t("_crosshair"),e.layoutManager=e._userOptions=e._canvas=e._groupsData=null,i("_stripsGroup"),i("_gridGroup"),i("_axesGroup"),i("_constantLinesGroup"),i("_labelAxesGroup"),i("_panesBorderGroup"),i("_seriesGroup"),i("_labelsGroup"),i("_crosshairCursorGroup"),i("_legendGroup"),i("_scrollBarGroup"),i("_scaleBreaksGroup"),t("_canvasClipRect"),t("_panesBackgroundGroup"),t("_backgroundRect"),t("_stripsGroup"),t("_gridGroup"),t("_axesGroup"),t("_constantLinesGroup"),t("_labelAxesGroup"),t("_panesBorderGroup"),t("_seriesGroup"),t("_labelsGroup"),t("_crosshairCursorGroup"),t("_legendGroup"),t("_scrollBarGroup"),t("_scaleBreaksGroup")},_getAnimationOptions:function(){return this._themeManager.getOptions("animation")},_getDefaultSize:function(){return{width:400,height:400}},_getOption:function(e){return this._themeManager.getOptions(e)},_applySize:function(){this._processRefreshData("_resize")},_resize:function(){this._doRender(this.__renderOptions||{animate:!1,isResize:!0})},_trackerType:"ChartTracker",_createTracker:function(){var e=this;this._tracker=new S[this._trackerType]({seriesGroup:this._seriesGroup,renderer:this._renderer,tooltip:this._tooltip,legend:this._legend,eventTrigger:this._eventTrigger})},_getTrackerSettings:function(){return this._getSelectionModes()},_getSelectionModes:function(){var e=this._themeManager;return{seriesSelectionMode:e.getOptions("seriesSelectionMode"),pointSelectionMode:e.getOptions("pointSelectionMode")}},_updateTracker:function(e){var t=this;this._tracker.update(this._getTrackerSettings()),this._tracker.setCanvases({left:0,right:this._canvas.width,top:0,bottom:this._canvas.height},e)},_doRender:function(e){var t,i,n=this;if(!this._skipRender&&(0!==this._canvas.width||0!==this._canvas.height)){this._resetIsReady(),i=(t=this._prepareDrawOptions(e)).recreateCanvas,this.__originalCanvas=this._canvas,this._canvas=o({},this._canvas),i?this.__currentCanvas=this._canvas:this._canvas=this.__currentCanvas,i&&this._updateCanvasClipRect(this._canvas),this._renderer.stopAllAnimations(!0),D(this._canvas),this._cleanGroups();var s=new Date;this._renderElements(t),this._lastRenderingTime=new Date-s}},_renderElements:function(e){var t,i,n,s=this,r=s._prepareToRender(e),a=s._isRotated(),c=s._isLegendInside(),l=[],h=s._getLayoutTargets(),_=o({},s._canvas),u=[],d=e.drawTitle&&e.drawLegend&&e.adjustAxes;d&&(u=s._getDrawElements(e,c)),s._renderer.lock(),s.layoutManager.setOptions(s._layoutManagerOptions()),s.layoutManager.layoutElements(u,s._canvas,(function(t){var i=t?o({},e,{animate:!1}):e,n=s._renderAxes(i,r,a);s._shrinkAxes(t,n)}),h,a),d&&s._updateCanvasClipRect(_),s._applyClipRects(r),s._appendSeriesGroups(),s._createCrosshairCursor(),T(h,(function(){var e=this.canvas;l.push({left:e.left,right:e.width-e.right,top:e.top,bottom:e.height-e.bottom})})),s._scrollBar&&("discrete"===(t=s._argumentAxes[0].getTranslator().getBusinessRange()).axisType&&t.categories&&t.categories.length<=1||"discrete"!==t.axisType&&t.min===t.max?i=n=void 0:(i=t.minVisible,n=t.maxVisible),s._scrollBar.init(t,!s._argumentAxes[0].getOptions().valueMarginsEnabled).setPosition(i,n)),s._updateTracker(l),s._updateLegendPosition(e,c),s._renderSeries(e,a,c),s._renderer.unlock()},_createCrosshairCursor:n,_appendSeriesGroups:function(){this._seriesGroup.linkAppend(),this._labelsGroup.linkAppend(),this._appendAdditionalSeriesGroups()},_renderSeries:function(e,t,i){this._calculateSeriesLayout(e,t),this._renderSeriesElements(e,t,i)},_calculateSeriesLayout:function(e,t){e.hideLayoutLabels=this.layoutManager.needMoreSpaceForPanesCanvas(this._getLayoutTargets(),t)&&!this._themeManager.getOptions("adaptiveLayout").keepLabels,this._updateSeriesDimensions(e)},_renderSeriesElements:function(e,t,i){var n,s,r=this,a=this.series,o=a.length,c=this._themeManager.getOptions("resolveLabelOverlapping");for(n=0;n<o;n++)s=a[n],this._applyExtraSettings(s,e),s.draw(e.animate&&s.getPoints().length<=e.animationPointsLimit&&this._renderer.animationEnabled(),e.hideLayoutLabels,this._getLegendCallBack(s));this._adjustSeriesLabels("shift"===c),"none"!==c&&this._resolveLabelOverlapping(c),this._renderTrackers(i),this._tracker.repairTooltip(),this._clearCanvas(),this._drawn(),this._renderCompleteHandler()},_clearCanvas:function(){this._canvas=this.__originalCanvas},_resolveLabelOverlapping:function(e){var t;switch(e){case"stack":t=this._resolveLabelOverlappingStack;break;case"hide":t=this._resolveLabelOverlappingHide;break;case"shift":t=this._resolveLabelOverlappingShift}r.isFunction(t)&&t.call(this)},_getVisibleSeries:function(){return i.grep(this.getAllSeries(),(function(e){return e.isVisible()}))},_resolveLabelOverlappingHide:function(){var e,t,i,n,s,r,a,o=[],c=this._getVisibleSeries();for(s=0;s<c.length;s++)for(a=c[s].getVisiblePoints(),r=0;r<a.length;r++)o.push.apply(o,a[r].getLabels());for(s=0;s<o.length;s++)if((e=o[s]).isVisible())for(i=e.getBoundingRect(),r=s+1;r<o.length;r++)q(i,n=(t=o[r]).getBoundingRect())&&t.draw(!1)},_cleanGroups:function(){var e=this;this._stripsGroup.linkRemove().clear(),this._gridGroup.linkRemove().clear(),this._axesGroup.linkRemove().clear(),this._constantLinesGroup.linkRemove().clear(),this._labelAxesGroup.linkRemove().clear(),this._labelsGroup.linkRemove().clear(),this._crosshairCursorGroup.linkRemove().clear(),this._scaleBreaksGroup.linkRemove().clear()},_createLegend:function(){var e=this,t=W(this._legendDataField);this._legend=new u.Legend({renderer:this._renderer,group:this._legendGroup,backgroundClass:"dxc-border",itemGroupClass:"dxc-item",textField:t.textField,getFormatObject:t.getFormatObject})},_updateLegend:function(){var e=this,t=this._themeManager,i=t.getOptions("legend"),n=this._getLegendData();i.containerBackgroundColor=t.getOptions("containerBackgroundColor"),i._incidentOccurred=this._incidentOccurred,this._legend.update(n,i)},_prepareDrawOptions:function(e){var t,i=this._getAnimationOptions();return t=o({},{force:!1,adjustAxes:!0,drawLegend:!0,drawTitle:!0,animate:i.enabled,animationPointsLimit:i.maxPointCountSupported},e,this.__renderOptions),L(t.recreateCanvas)||(t.recreateCanvas=t.adjustAxes&&t.drawLegend&&t.drawTitle),t},_processRefreshData:function(e){var t=c(this._currentRefreshData,O),i=c(e,O);(!this._currentRefreshData||t>=0&&i<t)&&(this._currentRefreshData=e)},_getLegendData:function(){return C(this._getLegendTargets(),(function(e){var t=e.legendData,i=e.getLegendStyles,n=i.normal.opacity;return e.visible||((!L(n)||n>.3)&&(n=.3),t.textOpacity=.3),t.states={hover:i.hover,selection:i.selection,normal:I({},i.normal,{opacity:n})},t}))},_getLegendOptions:function(e){return{legendData:{text:e[this._legendItemTextField],argument:e.argument,id:e.index,argumentIndex:e.argumentIndex},getLegendStyles:e.getLegendStyles(),visible:e.isVisible()}},_disposeSeries:function(e){var t=this;this.series&&(L(e)?(this.series[e].dispose(),this.series.splice(e,1)):(T(this.series,(function(e,t){return t.dispose()})),this.series.length=0)),this.series&&this.series.length||(this.series=[])},_disposeSeriesFamilies:function(){var e=this;T(this.seriesFamilies||[],(function(e,t){t.dispose()})),this.seriesFamilies=null,this._needHandleRenderComplete=!0},_simulateOptionChange:function(e,t,i){var n=this,s;_.compileSetter(e)(this._options,t,{functionsAsIs:!0,merge:!this._getOptionsByReference()[e]}),this._notifyOptionChanged(e,t,i),this._changes.reset()},_optionChanged:function(e){this._themeManager.resetOptions(e.name),this.callBase.apply(this,arguments)},_applyChanges:function(){var e=this;e._themeManager.update(e._options),e.callBase.apply(e,arguments),e._doRefresh()},_optionChangesMap:{animation:"ANIMATION",dataSource:"DATA_SOURCE",palette:"PALETTE",paletteExtensionMode:"PALETTE",legend:"DATA_INIT",seriesTemplate:"DATA_INIT",export:"FORCE_RENDER",valueAxis:"AXES_AND_PANES",argumentAxis:"AXES_AND_PANES",commonAxisSettings:"AXES_AND_PANES",panes:"AXES_AND_PANES",defaultPane:"AXES_AND_PANES",useAggregation:"AXES_AND_PANES",containerBackgroundColor:"AXES_AND_PANES",rotated:"ROTATED",customizePoint:"REFRESH_SERIES_REINIT",customizeLabel:"REFRESH_SERIES_REINIT",scrollBar:"SCROLL_BAR"},_customChangesOrder:["ANIMATION","REFRESH_SERIES_FAMILIES","DATA_SOURCE","PALETTE","REFRESH_SERIES_DATA_INIT","DATA_INIT","FORCE_RENDER","REFRESH_AXES","VISUAL_RANGE","AXES_AND_PANES","ROTATED","REFRESH_SERIES_REINIT","SCROLL_BAR","CHART_TOOLTIP","REINIT"],_change_ANIMATION:function(){this._renderer.updateAnimationOptions(this._getAnimationOptions())},_change_DATA_SOURCE:function(){this._needHandleRenderComplete=!0,this._processRefreshData("_updateDataSource")},_change_PALETTE:function(){this._themeManager.updatePalette(),this._refreshSeries("_dataInit")},_change_REFRESH_SERIES_DATA_INIT:function(){this._refreshSeries("_dataInit")},_change_DATA_INIT:function(){this._processRefreshData("_dataInit")},_change_REFRESH_SERIES_FAMILIES:function(){this._processSeriesFamilies(),this._populateBusinessRange(),this._processRefreshData("_forceRender")},_change_FORCE_RENDER:function(){this._processRefreshData("_forceRender")},_change_AXES_AND_PANES:function(){this._refreshSeries("_reinit")},_change_ROTATED:function(){this._createScrollBar(),this._refreshSeries("_reinit")},_change_REFRESH_SERIES_REINIT:function(){this._refreshSeries("_reinit")},_change_REFRESH_AXES:function(){var e=this;D(this._canvas),this._reinitAxes(),this._correctAxes(),this._forceRender()},_change_SCROLL_BAR:function(){this._createScrollBar(),this._processRefreshData("_forceRender")},_change_CHART_TOOLTIP:function(){this._organizeStackPoints()},_change_REINIT:function(){this._processRefreshData("_reinit")},_refreshSeries:function(e){this.needToPopulateSeries=!0,this._processRefreshData(e)},_doRefresh:function(){var e=this._currentRefreshData;e&&(this._currentRefreshData=null,this._renderer.stopAllAnimations(!0),this[e]())},_updateCanvasClipRect:function(e){var t,i,n=this;t=Math.max(e.width-e.left-e.right,0),i=Math.max(e.height-e.top-e.bottom,0),this._canvasClipRect.attr({x:e.left,y:e.top,width:t,height:i}),this._backgroundRect.attr({x:e.left,y:e.top,width:t,height:i})},_getCanvasClipRectID:function(){return this._canvasClipRect.id},_dataSourceChangedHandler:function(){this._applyingChanges?this._dataInit():this._requestChange(["DATA_INIT"])},_dataInit:function(){this._dataSpecificInit(!0)},_processSingleSeries:function(e){e.createPoints(!1)},_handleSeriesDataUpdated:function(){var e=this;this._getVisibleSeries().some((function(e){return e.useAggregation()}))&&this._populateMarginOptions(),this.series.forEach((function(t){return e._processSingleSeries(t)}),this)},_dataSpecificInit:function(e){var t=this;this.series&&!this.needToPopulateSeries||(this.series=this._populateSeries()),this._repopulateSeries(),this._seriesPopulatedHandlerCore(),this._populateBusinessRange(),this._tracker.updateSeries(this.series,this._skipRender),this._updateLegend(),e&&this._forceRender()},_forceRender:function(){this._doRender({force:!0})},_repopulateSeries:function(){var e,t=this,i=this._themeManager,n=this._dataSourceItems(),s=i.getOptions("dataPrepareSettings"),r;i.getOptions("seriesTemplate")&&this._populateSeries(n),this._groupSeries(),e=d.validateData(n,this._groupsData,this._incidentOccurred,s),i.resetPalette(),this.series.forEach((function(t){t.updateData(e[t.getArgumentField()])})),this._handleSeriesDataUpdated(),this._organizeStackPoints()},_organizeStackPoints:function(){var e=this,t,i=e._themeManager.getOptions("tooltip").shared,n={};T(e.series||[],(function(t,s){e._resetStackPoints(s),i&&e._prepareStackPoints(s,n)}))},_renderCompleteHandler:function(){var e=this,t=!0;this._needHandleRenderComplete&&(T(this.series,(function(e,i){t=t&&i.canRenderCompleteHandle()})),t&&(this._needHandleRenderComplete=!1,this._eventTrigger("done",{target:this})))},_getDrawElements:function(e,t){var i,n=this,s=[],r=this._themeManager.getOptions("export"),a=this._title.getLayoutOptions()||{},o=[];return this._exportMenu&&r.enabled&&(o.push(this._exportMenu),s.push(this._headerBlock)),e.drawTitle&&("bottom"!==a.verticalAlignment&&o.length?o.push(this._title):s.push(this._title)),e.drawLegend&&this._legend&&(this._legendGroup.linkAppend(),t||(i=this._legend.getLayoutOptions(),1===o.length&&"bottom"!==i.verticalAlignment&&"vertical"===i.cutSide?o.push(this._legend):s.push(this._legend))),o.length&&this._headerBlock.update(o,this._canvas),s},_dataIsReady:function(){return L(this.option("dataSource"))&&this._dataIsLoaded()},_populateSeriesOptions:function(e){for(var t=this,i=t._themeManager,n=i.getOptions("seriesTemplate"),s=n?b.processSeriesTemplate(n,e||[]):t.option("series"),r=y(s)?s:s?[s]:[],a=t._getExtraOptions(),o=void 0,c=void 0,l=[],h=function(e){t._specialProcessSeries(),t._populateBusinessRange(e&&e.getValueAxis()),t._renderer.stopAllAnimations(!0),t._updateLegend(),t._doRender({force:!0})},_=0;_<r.length;_++)(o=I(!0,{},r[_],a)).name||(o.name="Series "+(_+1).toString()),o.rotated=t._isRotated(),o.customizePoint=i.getOptions("customizePoint"),o.customizeLabel=i.getOptions("customizeLabel"),o.visibilityChanged=h,o.incidentOccurred=t._incidentOccurred,c=i.getOptions("series",o,r.length),t._checkPaneName(c)&&l.push(c);return l},_populateSeries:function(e){var t=this,i=[],n=t._incidentOccurred,s=t._populateSeriesOptions(e),r=void 0,a=0;t.needToPopulateSeries=!1,T(s,(function(e,n){var s=t.series&&t.series.filter((function(e){return e.name===n.name&&-1===i.map((function(e){return e.series})).indexOf(e)}))[0];s&&s.type===n.type?i.push({series:s,options:n}):(i.push({options:n}),a++)})),t._tracker.clearHover(),k(t.series,(function(e,n){i.some((function(e){return n===e.series}))||(t._disposeSeries(e),a++)})),t.series=[],a>0&&t._disposeSeriesFamilies(),t._themeManager.resetPalette();var o=function(e){t.series.forEach((function(t){t.notify(e)}))};return T(i,(function(e,i){var s=i.options,a={commonSeriesModes:t._getSelectionModes(),argumentAxis:t.getArgumentAxis(),valueAxis:t._getValueAxis(s.pane,s.axis)};i.series?(r=i.series).updateOptions(s,a):r=new p.Series(I({renderer:t._renderer,seriesGroup:t._seriesGroup,labelsGroup:t._labelsGroup,eventTrigger:t._eventTrigger,eventPipe:o,incidentOccurred:n},a),s),r.isUpdated?(r.index=t.series.length,t.series.push(r)):n("E2101",[s.type])})),t.series},getAllSeries:function(){return(this.series||[]).slice()},getSeriesByName:function(e){var t=null;return T(this.series,(function(i,n){if(n.name===e)return t=n,!1})),t},getSeriesByPos:function(e){return(this.series||[])[e]},clearSelection:function(){this._tracker.clearSelection()},hideTooltip:function(){this._tracker._hideTooltip()},render:function(e){var t=this;return t.__renderOptions=e,t.__forceRender=e&&e.force,t.callBase.apply(t,arguments),t.__renderOptions=t.__forceRender=null,t},refresh:function(){this._disposeSeries(),this._disposeSeriesFamilies(),this._change(["CONTAINER_SIZE"]),this._requestChange(["REFRESH_SERIES_REINIT"])}});P.forEach((function(e){K.prototype._optionChangesMap[e]="REFRESH_SERIES_DATA_INIT"})),M.forEach((function(e){K.prototype._optionChangesMap[e]="FORCE_RENDER"})),G.forEach((function(e){K.prototype._optionChangesMap[e]="REFRESH_SERIES_FAMILIES"})),t.overlapping=$,t.BaseChart=K,K.addPlugin(e("../core/export").plugin),K.addPlugin(e("../core/title").plugin),K.addPlugin(e("../core/tooltip").plugin),K.addPlugin(e("../core/loading_indicator").plugin),K.addPlugin(e("../core/data_source").plugin);var Q=K.prototype._change_TITLE;K.prototype._change_TITLE=function(){Q.apply(this,arguments),this._change(["FORCE_RENDER"])};var Y=K.prototype._change_TOOLTIP;K.prototype._change_TOOLTIP=function(){Y.apply(this,arguments),this._change(["CHART_TOOLTIP"])}}

