function module(e,a){"use strict";var r=e("../../core/utils/common").noop,t=e("../../core/utils/extend").extend,n=e("../../core/utils/iterator").each,s=e("./area_series").chart,i=s.area,l=e("./bar_series"),p=l.chart.bar,c=e("./line_series").chart,u=e("../core/utils"),o=e("../../core/utils/object"),_={getErrorBarRangeCorrector:r,_calculateErrorBars:r,_updateOptions:function(e){this._stackName="axis_"+(e.axis||"default")}};a.chart={},a.polar={},a.chart.stackedline=t({},c.line,_,{}),a.chart.stackedspline=t({},c.spline,_,{}),a.chart.fullstackedline=t({},c.line,_,{getValueRangeInitialValue:s.area.getValueRangeInitialValue}),a.chart.fullstackedspline=t({},c.spline,_,{getValueRangeInitialValue:s.area.getValueRangeInitialValue});var g=a.chart.stackedbar=t({},p,_,{_updateOptions:function(e){_._updateOptions.call(this,e),this._stackName=this._stackName+"_stack_"+(e.stack||"default")}});function h(e,a,r,t){return(e=o.clone(e)).value=a,e.minValue=r,e.translate(),e.argument=e.argument+t,e}function d(e){for(var a,r,t=0,n=[],s=e.length;t<s;)r=[a=e[t]],a.leftHole&&(r=[h(a,a.leftHole,a.minLeftHole,"left"),a]),a.rightHole&&r.push(h(a,a.rightHole,a.minRightHole,"right")),n.push(r),t++;return[].concat.apply([],n)}function f(e,a){for(var r;!r&&e;)r=e._segmentByArg&&e._segmentByArg[a],e=e._prevSeries;return r}a.chart.fullstackedbar=t({},p,_,{_updateOptions:g._updateOptions}),a.chart.stackedarea=t({},i,_,{_prepareSegment:function(e,a){return i._prepareSegment.call(this,d(e),a)},_appendInGroup:function(){this._group.append(this._extGroups.seriesGroup).toBackground()}}),a.chart.stackedsplinearea=t({},s.splinearea,_,{_prepareSegment:function(e,a){var r,t=this;if(e=d(e),this._prevSeries&&1!==e.length){for(var i=c.spline._calculateBezierPoints(e,a),l=u.map(e,(function(e){var a=e.getCoords(!0);return a.argument=e.argument,a})),p=[],o={},_=0,g=t._prevSeries._segments.length;_<g;)p=p.concat(t._prevSeries._segments[_].line),_++;n(p,(function(e,a){if(null!==a.argument){var r=a.argument.valueOf();o[r]?o[r].push(a):o[r]=[a]}})),t._prevSeries._segmentByArg=o,l=c.spline._calculateBezierPoints(l,a),n(l,(function(e,a){var r,n=a.argument.valueOf();e%3==0&&(r=o[n]||f(t._prevSeries,n))&&(l[e-1]&&r[0]&&(l[e-1]=r[0]),l[e+1]&&(l[e+1]=r[2]||a))})),r={line:i,area:i.concat(l.reverse())},t._areaPointsToSplineAreaPoints(r.area)}else r=s.splinearea._prepareSegment.call(this,e,a);return r},_appendInGroup:a.chart.stackedarea._appendInGroup}),a.chart.fullstackedarea=t({},i,_,{_prepareSegment:a.chart.stackedarea._prepareSegment,_appendInGroup:a.chart.stackedarea._appendInGroup}),a.chart.fullstackedsplinearea=t({},s.splinearea,_,{_prepareSegment:a.chart.stackedsplinearea._prepareSegment,_appendInGroup:a.chart.stackedarea._appendInGroup}),a.polar.stackedbar=t({},l.polar.bar,_,{})}

