function module(e,r){"use strict";var o=e("../core/utils/extend").extend,n=e("../core/utils/iterator").each,l=e("./core/utils"),t=e("../ui/themes"),a={},i={},c={},u=o,s=n,m=l.normalizeEnum,g=null,f,d=0,b={};function h(e){var r=m(e);return a[r]||a[i[r]||C()]}function p(e,r){return i[e+"."+r]||c[e+"."+r]||i[e]}function k(e,r,o){return p(e+r,o)||p(e,o)}function C(e,r){if(!arguments.length)return g||p(t.current())||f;var o=m(r);return g=(e&&e.platform?k(m(e.platform),e.version,o):p(m(e),o))||g,this}function S(e,r){var o=e.indexOf(r);return o>0?{name:e.substring(0,o),scheme:e.substring(o+1)}:null}function v(e,r){var o=S(e,".")||{name:e},n=o.name,l=o.scheme;l?(i[n]=i[n]||r,i[n+"."+l]=r):i[n]=r}function y(e,r){var o=m(e&&e.name);o&&(e.isDefault&&(f=o),v(o,o),a[o]=u(!0,{},h(r),I(e)))}function T(e,r){v(m(e),m(r))}function x(e,r){c[e]=r}function M(e,r,o,n){var l=o?o[r]:n;void 0!==l&&void 0===e[r]&&(e[r]=l)}function G(e,r,o,n){var l=o?o[r]:n;void 0!==l&&(e[r]=u(!0,{},l,e[r]))}function I(e){return M((e=u(!0,{loadingIndicator:{font:{}},export:{font:{}},legend:{font:{},border:{}},title:{font:{}},tooltip:{font:{}},"chart:common":{},"chart:common:axis":{grid:{},minorGrid:{},tick:{},minorTick:{},title:{font:{}},label:{font:{}}},chart:{commonSeriesSettings:{candlestick:{}}},pie:{},polar:{},gauge:{scale:{tick:{},minorTick:{},label:{font:{}}}},barGauge:{},funnel:{},sankey:{},map:{background:{}},treeMap:{tile:{selectionStyle:{border:{}}},group:{border:{},selectionStyle:{border:{}},label:{font:{}}}},rangeSelector:{scale:{tick:{},minorTick:{},label:{font:{}}},chart:{}},sparkline:{},bullet:{}},e)).loadingIndicator,"backgroundColor",e),M(e.chart.commonSeriesSettings.candlestick,"innerColor",null,e.backgroundColor),M(e.map.background,"color",null,e.backgroundColor),M(e.title.font,"color",null,e.primaryTitleColor),G(e.title,"subtitle",null,e.title),M(e.legend.font,"color",null,e.secondaryTitleColor),M(e.legend.border,"color",null,e.axisColor),A(e),s(["chart","pie","polar","gauge","barGauge","map","treeMap","funnel","rangeSelector","sparkline","bullet","sankey"],(function(r,o){M(e[o],"redrawOnResize",e),M(e[o],"containerBackgroundColor",null,e.backgroundColor),G(e[o],"tooltip",e),G(e[o],"export",e)})),s(["chart","pie","polar","gauge","barGauge","map","treeMap","funnel","rangeSelector","sankey"],(function(r,o){G(e[o],"loadingIndicator",e),G(e[o],"legend",e),G(e[o],"title",e)})),s(["chart","pie","polar"],(function(r,o){G(e,o,null,e["chart:common"])})),s(["chart","polar"],(function(r,o){e[o]=e[o]||{},G(e[o],"commonAxisSettings",null,e["chart:common:axis"])})),G(e.rangeSelector.chart,"commonSeriesSettings",e.chart),G(e.rangeSelector.chart,"dataPrepareSettings",e.chart),M(e.treeMap.group.border,"color",null,e.axisColor),M(e.treeMap.tile.selectionStyle.border,"color",null,e.primaryTitleColor),M(e.treeMap.group.selectionStyle.border,"color",null,e.primaryTitleColor),M(e.map.legend,"backgroundColor",e),L(e),e}function A(e){var r=e["chart:common:axis"],o="color";s([r,r.grid,r.minorGrid,r.tick,r.minorTick],(function(r,o){M(o,"color",null,e.axisColor)})),M(r.title.font,"color",null,e.secondaryTitleColor),M(r.label.font,"color",null,e.axisLabelColor),M(e.gauge.scale.label.font,"color",null,e.axisLabelColor),M(e.gauge.scale.tick,"color",null,e.backgroundColor),M(e.gauge.scale.minorTick,"color",null,e.backgroundColor),M(e.rangeSelector.scale.label.font,"color",null,e.axisLabelColor)}function L(e){var r=e.map;s(["area","line","marker"],(function(e,o){G(r,"layer:"+o,null,r.layer)})),s(["dot","bubble","pie","image"],(function(e,o){G(r,"layer:marker:"+o,null,r["layer:marker"])}))}function z(e){var r=++d;e._cache=r,b[r]=e}function O(e){delete b[e._cache]}function _(){return s(b,(function(){this.refresh()})),this}u(r,{currentTheme:C,registerTheme:y,getTheme:h,registerThemeAlias:T,registerThemeSchemeAlias:x,refreshTheme:_,addCacheItem:z,removeCacheItem:O})}

