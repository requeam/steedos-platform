function module(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smartFormatter=B,t.formatRange=E;var n,r=l(e("../../format_helper")),i=e("../../core/utils/type"),a,o=l(e("../../core/utils/date")),f=e("../../core/utils/math"),u=e("../core/utils");function l(e){return e&&e.__esModule?e:{default:e}}var s=r.default.format,d=Math.floor,c=Math.abs,g="exponential",h=["fixedPoint","thousands","millions","billions","trillions",g],m=["millisecond","second","minute","hour","day","month","year"];function p(e,t,n,r){var i,a,f,u,l,s,d=m.length;if("week"===r?r="day":"quarter"===r?r="month":"shorttime"===r?r="hour":"longtime"===r&&(r="second"),u=m.indexOf(r),n){if(a=o.default.getDatesDifferences(t,n),i=o.default.getDatesDifferences(t,e),a[r])for(l=d-1;l>=u;l--)if(f=m[l],l===u)D(a,u+(a.millisecond?2:1));else if(a[f]){y(a,l);break}}else for(i=o.default.getDatesDifferences(e,t),l=d-1;l>=u;l--)if(i[f=m[l]]){if(l-u>1){for(s=u+1;s>=0;s--)y(i,s);break}if(v(t,f)){for(s=l-1;s>0;s--)y(i,s);break}}return n?a:i}function v(e,t){var n,r=[e.getMilliseconds(),e.getSeconds(),e.getMinutes(),e.getHours(),e.getDate(),e.getMonth()],i=m.indexOf(t);for(n=0;n<i;n++)if(4===n&&1!==r[n]||4!==n&&0!==r[n])return!1;return!0}function y(e,t){var n=m[t];e[n]&&(e[n]=!1,e.count--)}function D(e,t){var n=m[t];!1===e[n]&&(e[n]=!0,e.count++)}function x(e){return e.length-parseInt(e).toString().length}function k(e,t){var n,r,i,a=0;for(i=c(t-e[0]),n=1;n<e.length;n++)(r=c(t-e[n]))<i&&(i=r,a=n);return a}function b(e){return e.toString().split(".")}function O(e){var t=void 0;return(0,i.isFunction)(e)&&(t=e,e=null),{type:e,formatter:t}}function B(e,t){var n,a,l,m,v,y,D,B,j,F=t.tickInterval,M=c(e).toString(),T=0,E=0,I=0,_=-1,P=t.labelOptions.format,S=t.ticks,w="logarithmic"===t.type;return 1!==S.length||0!==S.indexOf(e)||(0,i.isDefined)(F)||(F=c(e)>=1?1:(0,f.adjust)(1-c(e),e)),(0,i.isDefined)(P)||"discrete"===t.type||!e||10!==t.logarithmBase&&w||("datetime"!==t.dataType&&(0,i.isDefined)(F)?(S.length&&-1===S.indexOf(e)&&(_=k(S,e),F=(0,f.adjust)(c(e-S[_]),e)),(v=b(F))<2&&(v=b(e)),w?(D=(0,u.getAdjustedLog10)(c(e)))>0?m=h[d(D/3)]||g:D<-4?m=g:T=void 0:v.length>1&&!(0,i.isExponential)(F)?(T=v[1].length,m=h[I]):(0,i.isExponential)(F)&&(-1!==M.indexOf(".")||(0,i.isExponential)(e))?(m=g,T=(0,i.isExponential)(e)?Math.max(c((0,f.getExponent)(e)-(0,f.getExponent)(F)),c((0,f.getPrecision)(e)-(0,f.getPrecision)(F))):c(x(M.split(".")[1])-(0,f.getExponent)(F)+1)):(n=d((0,u.getAdjustedLog10)(F)),l=a=d((0,u.getAdjustedLog10)(c(e))),a-n>=2&&(l=n),E=3*(I=d(l/3)),I<5?(n-E==2&&a>=3&&(E=3*++I),m=h[I]):m=h[h.length-1],E>0&&(v=b(F/Math.pow(10,E)))[1]&&(T=v[1].length)),void 0===m&&void 0===T||(P={type:m,precision:T})):"datetime"===t.dataType&&(m=o.default.getDateFormatByTickInterval(F),t.showTransition&&S.length&&(_=S.map(Number).indexOf(+e),1===S.length&&0===_?m=r.default.getDateFormatByTicks(S):(-1===_?B=k(S,e):(B=0===_?S.length-1:_-1,j=0===_?1:-1),y=p(S[B],e,S[j],m),m=r.default.getDateFormatByDifferences(y,m))),P=O(m))),s(e,P)}function j(e){var t=!1;for(var n in e)!0===e[n]||"hour"===n||t?(e[n]=!1,t=!0):!1===e[n]&&(e[n]=!0);return O(r.default.getDateFormatByDifferences(e))}function F(e,t){var n=!1;for(var i in e)n?e[i]=!1:i===t?n=!0:e[i]=!0;return O(r.default.getDateFormatByDifferences(e))}function M(e,t,n){var i=p(e,t),a=o.default.getDateFormatByTickInterval(n),f,u=O(r.default.getDateFormatByDifferences(i,a)),l=[];if(n in i){var d=F(p(e,t),n),c=s(e,d);c&&l.push(c)}else{var g=j(p(e,t)),h=s(e,g);h&&l.push(h),l.push(s(e,u)+" - "+s(t,u))}return l.join(", ")}function T(e){if((0,i.isObject)(e)){var t=Object.keys(e),n;if(1===t.reduce((function(t,n){return e[n]+t}),0)){var r=t.filter((function(t){return 1===e[t]}))[0];return r.slice(0,r.length-1)}}return e}function E(e,t,n,r){var i=r.dataType,a=r.type,o=r.logarithmBase;if("discrete"===a)return"";if("datetime"===i)return M(e,t,T(n));var f={ticks:[],type:a,dataType:i,tickInterval:n,logarithmBase:o,labelOptions:{}};return B(e,f)+" - "+B(t,f)}}

