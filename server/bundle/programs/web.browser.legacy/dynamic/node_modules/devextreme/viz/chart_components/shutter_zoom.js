function module(t,r,o){"use strict";var e=t("../../events/drag"),n=".shutter-zoom",a=e.start+n,i=e.move+n,s=e.end+n;function h(t,r,o,e){var n=Math.floor(o?e.pageY-t.top:e.pageX-t.left),a=o?r.y1:r.x1,i=o?r.y2:r.x2;return n<a?n=a:n>i&&(n=i),n}function d(t,r,o){var e=o.pageX-t.left,n=o.pageY-t.top;return e>=r.x1&&e<=r.x2&&n>=r.y1&&n<=r.y2}function u(t){return function(r){var o=t.getRootOffset(),e=t.getCanvas();d(o,e,r)?(t.rootOffset=o,t.canvas=e,t.startCoord=h(o,e,t.rotated,r),t.triggerStart(),t.rect.attr({x:e.x1,y:e.y1,width:e.width,height:e.height}).append(t.root)):r.cancel=!0}}function f(t){return function(r){var o=h(t.rootOffset,t.canvas,t.rotated,r),e={};t.curCoord=o,e[t.rotated?"y":"x"]=Math.min(t.startCoord,o),e[t.rotated?"height":"width"]=Math.abs(t.startCoord-o),t.rect.attr(e)}}function c(t){return function(r){t.triggerEnd(),t.rect.remove()}}function g(t){var r=t.chart,o=t.renderer,e=t.rotated,h=o.rect(0,0,0,0).attr(t.shutterOptions),d={rect:h,root:o.root,rotated:e,triggerStart:function(){r._eventTrigger("zoomStart")},triggerEnd:function(){var t=r._argumentAxes[0].getTranslator(),o=Math.min(this.startCoord,this.curCoord),e=Math.max(this.startCoord,this.curCoord);r._eventTrigger("zoomEnd",{rangeStart:t.from(o),rangeEnd:t.from(e)})},dispose:function(){o.root.off(n),h.dispose()},getRootOffset:function(){return o.getRootOffset()},getCanvas:function(){var t=r._canvas,o=r.panes,e=o[0].canvas,n=o[o.length-1].canvas;return{x1:e.left,y1:e.top,x2:t.width-n.right,y2:t.height-n.bottom,width:t.width-e.left-n.right,height:t.height-e.top-n.bottom}}};return o.root.off(n).on(a,{direction:e?"vertical":"horizontal",immediate:!0},u(d)).on(i,f(d)).on(s,c(d)),d}o.exports={name:"shutter_zoom",init:function(){var t=this.option("shutterZoom")||{};t.enabled&&(this._shutterZoom=g({chart:this,renderer:this._renderer,rotated:this.option("rotated"),shutterOptions:t}))},dispose:function(){this._shutterZoom&&this._shutterZoom.dispose()}}}

