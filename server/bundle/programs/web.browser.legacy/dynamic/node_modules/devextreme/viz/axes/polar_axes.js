function module(t,e){"use strict";var n=t("../core/utils"),i=t("../../core/utils/type").isDefined,r=t("../../core/utils/extend").extend,s=t("./axes_constants"),a,o=t("./xy_axes").linear,u=t("./tick").tick,c,g=n.map,h=Math,d=h.abs,l=h.round,_=n.convertPolarToXY,p=r,f=t("../../core/utils/common").noop,x=90;function y(t){var e;return(t=n.normalizeAngle(t))>=315&&t<=360||t<45&&t>=0?e=1:t>=45&&t<135?e=2:t>=135&&t<225?e=3:t>=225&&t<315&&(e=4),e}a=(c=e).circular={_applyMargins:function(t){return t},_getTranslatorOptions:function(){return{isHorizontal:!0,conversionValue:!0,addSpiderCategory:this._getSpiderCategoryOption(),stick:this._getStick()}},getCenter:function(){return this._center},getRadius:function(){return this._radius},getAngles:function(){var t=this._options;return[t.startAngle,t.endAngle]},_updateRadius:function(t){var e=Math.min(t.width-t.left-t.right,t.height-t.top-t.bottom)/2;this._radius=e<0?0:e},_updateCenter:function(t){this._center={x:t.left+(t.width-t.right-t.left)/2,y:t.top+(t.height-t.top-t.bottom)/2}},_processCanvas:function(t){return this._updateRadius(t),this._updateCenter(t),{left:0,right:0,width:this._getScreenDelta()}},_createAxisElement:function(){return this._renderer.circle()},_updateAxisElementPosition:function(){var t=this.getCenter();this._axisElement.attr({cx:t.x,cy:t.y,r:this.getRadius()})},_boundaryTicksVisibility:{min:!0},_getSpiderCategoryOption:function(){return this._options.firstPointOnStartAngle},_validateOptions:function(t){var e=this,r=t.originValue,a=t.wholeRange={},o=t.period;i(r)&&(r=this._validateUnit(r)),o>0&&t.argumentType===s.numeric&&(r=r||0,a.endValue=r+o,this._viewport=n.getVizRangeObject([r,a.endValue])),i(r)&&(a.startValue=r)},_setVisualRange:f,allowToExtendVisualRange:function(t){return!0},_getStick:function(){return this._options.firstPointOnStartAngle||this._options.type!==s.discrete},_getTranslatedCoord:function(t,e){return this._translator.translate(t,e)-90},_getCanvasStartEnd:function(){return{start:-90,end:270}},_getStripGraphicAttributes:function(t,e){var n=this.getCenter(),i=this.getAngles()[0],r=this.getRadius();return{x:n.x,y:n.y,innerRadius:0,outerRadius:r,startAngle:-e-i,endAngle:-t-i}},_createStrip:function(t){return this._renderer.arc(t.x,t.y,t.innerRadius,t.outerRadius,t.startAngle,t.endAngle)},_getStripLabelCoords:function(t,e){var i=this,r=this._getStripGraphicAttributes(t,e),a=r.startAngle+(r.endAngle-r.startAngle)/2,o=n.getCosAndSin(a),u=this.getRadius()/2,c=this.getCenter(),g,h;return{x:l(c.x+u*o.cos),y:l(c.y-u*o.sin),align:s.center}},_getConstantLineGraphicAttributes:function(t){var e=this.getCenter(),n=this.getRadius();return{points:[e.x,e.y,e.x+n,e.y]}},_createConstantLine:function(t,e){var n=this.getCenter();return this._createPathElement(this._getConstantLineGraphicAttributes(t).points,e).rotate(t+this.getAngles()[0],n.x,n.y)},_getConstantLineLabelsCoords:function(t){var e=this,i=n.getCosAndSin(-t-this.getAngles()[0]),r=this.getRadius()/2,s=this.getCenter(),a,o;return{x:l(s.x+r*i.cos),y:l(s.y-r*i.sin)}},_checkAlignmentConstantLineLabels:f,_adjustDivisionFactor:function(t){return 180*t/(this.getRadius()*Math.PI)},_getScreenDelta:function(){var t=this.getAngles();return h.abs(t[0]-t[1])},_getTickMarkPoints:function(t,e){var n=this.getCenter(),i={inside:-1,center:-.5,outside:0},r=this.getRadius()+e*i[this._options.tickOrientation||"center"];return[n.x+r,n.y,n.x+r+e,n.y]},_getLabelAdjustedCoord:function(t){var e=this,i=t.labelCoords,r=i.y,s=i.angle,a=n.getCosAndSin(s),o=a.cos,u=a.sin,c=t.labelBBox,g=c.width/2,h=c.height/2,d=this._options.label.indentFromAxis||0,l=i.x+d*o,_=r+(r-c.y-h)+d*u;switch(y(s)){case 1:l+=g,_+=h*u;break;case 2:l+=g*o,_+=h;break;case 3:l+=-g,_+=h*u;break;case 4:l+=g*o,_+=-h}return{x:l,y:_}},_getGridLineDrawer:function(){var t=this;return function(e,n){var i=t.getCenter();return t._createPathElement(t._getGridPoints().points,n).rotate(e.coords.angle,i.x,i.y)}},_getGridPoints:function(){var t=this.getRadius(),e=this.getCenter();return{points:[e.x,e.y,e.x+t,e.y]}},_getTranslatedValue:function(t,e){var n=this.getAngles()[0],i=this._translator.translate(t,-e),r=_(this.getCenter(),n,i,this.getRadius());return{x:r.x,y:r.y,angle:i+n-90}},_getAdjustedStripLabelCoords:function(t){var e=t.labelBBox;return{translateY:t.label.attr("y")-e.y-e.height/2}},coordsIn:function(t,e){return n.convertXYToPolar(this.getCenter(),t,e).r>this.getRadius()},_rotateTick:function(t,e){var n=this.getCenter();t.rotate(e.angle,n.x,n.y)},_validateOverlappingMode:function(t){return s.validateOverlappingMode(t)},_validateDisplayMode:function(){return"standard"},_getStep:function(t){var e=this,n=this.getRadius()+(this._options.label.indentFromAxis||0),i=t.reduce((function(t,e){var n=t;return t.width<e.width&&(n.width=e.width),t.height<e.height&&(n.height=e.height),n}),{width:0,height:0}),r=d(2*h.atan(i.height/(2*n-i.width))*180/h.PI),a=d(2*h.atan(i.width/(2*n-i.height))*180/h.PI);return s.getTicksCountInRange(this._majorTicks,"angle",h.max(r,a))},_checkBoundedLabelsOverlapping:function(t,e,n){var i=h.floor((n.length-1)/t)*t,r=this._options.label;i&&s.areLabelsOverlap(n[0],n[i],r.minSpacing,s.center)&&("first"===r.hideFirstOrLast?e[0].label.remove():e[i].label.remove())},shift:function(t){this._axisGroup.attr({translateX:t.right,translateY:t.bottom})}},c.circularSpider=p({},a,{_createAxisElement:function(){return this._renderer.path([],"area")},_updateAxisElementPosition:function(){this._axisElement.attr({points:g(this.getSpiderTicks(),(function(t){return{x:t.coords.x,y:t.coords.y}}))})},_getStick:function(){return!0},_getSpiderCategoryOption:function(){return!0},getSpiderTicks:function(){var t=this,e=this.getFullTicks();return this._spiderTicks=e.map(u(this,this.renderer,{},{},this._getSkippedCategory(e),!0)),this._spiderTicks.forEach((function(t){t.initCoords()})),this._spiderTicks},_getStripGraphicAttributes:function(t,e){for(var n,i,r,s,a=this.getCenter(),o=this.getSpiderTicks(),u=[],c=0,g=o.length;c<g;)(s=o[c].coords).angle>=t&&s.angle<=e&&(n||(n=(o[c-1]||o[o.length-1]).coords,u.push((s.x+n.x)/2,(s.y+n.y)/2)),u.push(s.x,s.y),r=(o[c+1]||o[0]).coords,i={x:(s.x+r.x)/2,y:(s.y+r.y)/2}),c++;return u.push(i.x,i.y),u.push(a.x,a.y),{points:u}},_createStrip:function(t){var e=t.points;return this._renderer.path(e,"area")},_getTranslatedCoord:function(t,e){return this._translator.translate(t,e)-90},_setTickOffset:function(){this._tickOffset=!1}}),c.linear={_setVisualRange:f,_getStick:o._getStick,_getSpiderCategoryOption:f,_getTranslatorOptions:function(){return{isHorizontal:!0,stick:this._getStick()}},_updateRadius:a._updateRadius,getRadius:a.getRadius,getCenter:a.getCenter,getAngles:a.getAngles,_updateCenter:a._updateCenter,_processCanvas:function(t){return this._updateRadius(t),this._updateCenter(t),{left:0,right:0,width:this.getRadius()}},_createAxisElement:o._createAxisElement,_updateAxisElementPosition:function(){var t=this.getCenter();this._axisElement.attr({points:[t.x,t.y,t.x+this.getRadius(),t.y]}).rotate(this.getAngles()[0]-90,t.x,t.y)},_getScreenDelta:function(){return this.getRadius()},_getTickMarkPoints:function(t,e){return[t.x-e/2,t.y,t.x+e/2,t.y]},_getLabelAdjustedCoord:function(t){var e,i,r=this,s=t.labelCoords,a=s.y,o=n.getCosAndSin(s.angle),u=this._options.label.indentFromAxis||0,c=t.labelBBox;return{x:e=s.x-d(u*o.sin)+d(c.width/2*o.cos)-c.width/2,y:i=a+(a-c.y)-d(c.height/2*o.sin)+d(u*o.cos)}},_getGridLineDrawer:function(){var t=this;return function(e,n){var i=t._getGridPoints(e.coords);return t._renderer.circle(i.cx,i.cy,i.r).attr(n).sharp()}},_getGridPoints:function(t){var e=this.getCenter();return{cx:e.x,cy:e.y,r:n.getDistance(e.x,e.y,t.x,t.y)}},_getTranslatedValue:function(t,e){var n=this.getAngles()[0],i=_(this.getCenter(),n,0,this._translator.translate(t,e));return{x:i.x,y:i.y,angle:n-90}},_getTranslatedCoord:function(t,e){return this._translator.translate(t,e)},_getCanvasStartEnd:function(){return{start:0,end:this.getRadius()}},_getStripGraphicAttributes:function(t,e){var n=this.getCenter();return{x:n.x,y:n.y,innerRadius:t,outerRadius:e}},_createStrip:function(t){return this._renderer.arc(t.x,t.y,t.innerRadius,t.outerRadius,0,360)},_getAdjustedStripLabelCoords:a._getAdjustedStripLabelCoords,_getStripLabelCoords:function(t,e){var n=this,i=t+(e-t)/2,r=this.getCenter(),a=l(r.y-i);return{x:r.x,y:a,align:s.center}},_getConstantLineGraphicAttributes:function(t){var e=this.getCenter();return{cx:e.x,cy:e.y,r:t}},_createConstantLine:function(t,e){var n=this._getConstantLineGraphicAttributes(t);return this._renderer.circle(n.cx,n.cy,n.r).attr(e).sharp()},_getConstantLineLabelsCoords:function(t){var e=this,n=this.getCenter(),i=l(n.y-t);return{x:n.x,y:i}},_checkAlignmentConstantLineLabels:f,_rotateTick:function(t,e,n){!n&&t.rotate(e.angle+90,e.x,e.y)},_validateOverlappingMode:a._validateOverlappingMode,_validateDisplayMode:a._validateDisplayMode,_getStep:function(t){var e=y(this.getAngles()[0]),n=this._options.label.minSpacing,i=2===e||4===e?function(t){return t.width+n}:function(t){return t.height},r=t.reduce((function(t,e){return h.max(t,i(e))}),0);return s.getTicksCountInRange(this._majorTicks,2===e||4===e?"x":"y",r)}},c.linearSpider=p({},c.linear,{_createPathElement:function(t,e){return this._renderer.path(t,"area").attr(e).sharp()},setSpiderTicks:function(t){this._spiderTicks=t},_getGridLineDrawer:function(){var t=this;return function(e,n,i){return t._createPathElement(t._getGridPoints(e.coords).points,n)}},_getGridPoints:function(t){var e=this.getCenter(),i=n.getDistance(e.x,e.y,t.x,t.y);return this._getGridPointsByRadius(i)},_getGridPointsByRadius:function(t){var e=this.getCenter();return{points:g(this._spiderTicks,(function(i){var r=n.getCosAndSin(i.coords.angle);return{x:l(e.x+t*r.cos),y:l(e.y+t*r.sin)}}))}},_getStripGraphicAttributes:function(t,e){var n=this._getGridPointsByRadius(e).points,i;return{points:[this._getGridPointsByRadius(t).points,n.reverse()]}},_createStrip:c.circularSpider._createStrip,_getConstantLineGraphicAttributes:function(t){return this._getGridPointsByRadius(t)},_createConstantLine:function(t,e){return this._createPathElement(this._getConstantLineGraphicAttributes(t).points,e)}})}

